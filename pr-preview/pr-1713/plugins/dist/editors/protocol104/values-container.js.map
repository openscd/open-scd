{"version":3,"file":"values-container.js","sourceRoot":"","sources":["../../../src/editors/protocol104/values-container.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,aAAa,EACb,IAAI,EACJ,QAAQ,GAET,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAEpC,OAAO,EACL,YAAY,EACZ,cAAc,GACf,MAAM,qCAAqC,CAAC;AAE7C,OAAO,oBAAoB,CAAC;AAE5B,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AAEvD;;;GAGG;AAEI,IAAM,kBAAkB,GAAxB,MAAM,kBAAmB,SAAQ,gBAAgB;IAEtD,IAAI,WAAW;QACb,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;aAChD,MAAM,CACL,GAAG,CAAC,EAAE,CACJ,GAAG,CAAC,gBAAgB,CAClB,uBAAuB,oBAAoB,cAAc,CAC1D,CAAC,MAAM,GAAG,CAAC,CACf;aACA,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;IAED,0EAA0E;IAClE,uBAAuB;QAC7B,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC/D,CAAC;IAEO,eAAe;QACrB,OAAO,IAAI,CAAA;;;;iBAIE,GAAG,CAAC,qCAAqC,CAAC;iBAC1C,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE;;;UAG3C,CAAC;IACT,CAAC;IAED,MAAM;QACJ,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;QAC9B,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACnB,OAAO,IAAI,CAAA;UACP,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBACtB,OAAO,IAAI,CAAA;yBACI,IAAI,CAAC,SAAS;oBACnB,IAAI,CAAC,GAAG;wBACJ,UAAU;gCACF,CAAC;YACzB,CAAC,CAAC;UACA,IAAI,CAAC,eAAe,EAAE;OACzB,CAAC;SACH;QACD,OAAO,IAAI,CAAA;;aAEF,GAAG,CAAC,4BAA4B,CAAC;;;QAGtC,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC;IAC/B,CAAC;;AAEM,yBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;GAkBlB,CAAC;AApEF;IADC,QAAQ,EAAE;qDAUV;AAXU,kBAAkB;IAD9B,aAAa,CAAC,sBAAsB,CAAC;GACzB,kBAAkB,CAuE9B;SAvEY,kBAAkB","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  property,\n  TemplateResult,\n} from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport {\n  compareNames,\n  newWizardEvent,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport './ied-container.js';\n\nimport { selectDoWizard } from './wizards/selectDo.js';\nimport { PROTOCOL_104_PRIVATE } from './foundation/private.js';\nimport { Base104Container } from './base-container.js';\n\n/**\n * Container that will render an 'ied-104-container' for every IED which contains DAI Elements related to the\n * 104 Protocol.\n */\n@customElement('values-104-container')\nexport class Values104Container extends Base104Container {\n  @property()\n  get iedElements(): Element[] {\n    return Array.from(this.doc.querySelectorAll('IED'))\n      .filter(\n        ied =>\n          ied.querySelectorAll(\n            `DAI > Private[type=\"${PROTOCOL_104_PRIVATE}\"] > Address`\n          ).length > 0\n      )\n      .sort((a, b) => compareNames(a, b));\n  }\n\n  /** Opens a [[`WizardDialog`]] for creating a new `Substation` element. */\n  private openCreateAddressWizard(): void {\n    this.dispatchEvent(newWizardEvent(selectDoWizard(this.doc)));\n  }\n\n  private renderAddButton(): TemplateResult {\n    return html`<h1>\n      <mwc-fab\n        extended\n        icon=\"add\"\n        label=\"${get('protocol104.wizard.title.addAddress')}\"\n        @click=${() => this.openCreateAddressWizard()}\n      >\n      </mwc-fab>\n    </h1>`;\n  }\n\n  render(): TemplateResult {\n    const ieds = this.iedElements;\n    if (ieds.length > 0) {\n      return html`\n        ${ieds.map(iedElement => {\n          return html`<ied-104-container\n            .editCount=${this.editCount}\n            .doc=\"${this.doc}\"\n            .element=\"${iedElement}\"\n          ></ied-104-container>`;\n        })}\n        ${this.renderAddButton()}\n      `;\n    }\n    return html` <h1>\n        <span style=\"color: var(--base1)\"\n          >${get('protocol104.values.missing')}</span\n        >\n      </h1>\n      ${this.renderAddButton()}`;\n  }\n\n  static styles = css`\n    mwc-fab {\n      position: fixed;\n      bottom: 32px;\n      right: 32px;\n    }\n\n    h1 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      margin: 0px;\n      line-height: 48px;\n      padding-left: 0.3em;\n    }\n  `;\n}\n"]}