{"version":3,"file":"optfields.js","sourceRoot":"","sources":["../../src/wizards/optfields.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, TemplateResult } from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-list/mwc-list-item';\n\nimport '@openscd/open-scd/src/wizard-checkbox.js';\nimport '@openscd/open-scd/src/wizard-select.js';\nimport {\n  getValue,\n  Wizard,\n  WizardAction,\n  WizardActor,\n  WizardInputElement,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport {\n  cloneElement,\n} from '@openscd/xml';\n\ninterface ContentOptions {\n  seqNum: string | null;\n  timeStamp: string | null;\n  dataSet: string | null;\n  reasonCode: string | null;\n  dataRef: string | null;\n  entryID: string | null;\n  configRef: string | null;\n  bufOvfl: string | null;\n}\n\nexport function contentOptFieldsWizard(\n  option: ContentOptions\n): TemplateResult[] {\n  return Object.entries(option).map(\n    ([key, value]) =>\n      html`<wizard-checkbox\n        label=\"${key}\"\n        .maybeValue=${value}\n        nullable\n        helper=\"${get(`scl.${key}`)}\"\n      ></wizard-checkbox>`\n  );\n}\n\nfunction updateOptFieldsAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): WizardAction[] => {\n    const seqNum = getValue(inputs.find(i => i.label === 'seqNum')!);\n    const timeStamp = getValue(inputs.find(i => i.label === 'timeStamp')!);\n    const dataSet = getValue(inputs.find(i => i.label === 'dataSet')!);\n    const reasonCode = getValue(inputs.find(i => i.label === 'reasonCode')!);\n    const dataRef = getValue(inputs.find(i => i.label === 'dataRef')!);\n    const entryID = getValue(inputs.find(i => i.label === 'entryID')!);\n    const configRef = getValue(inputs.find(i => i.label === 'configRef')!);\n    const bufOvfl = getValue(inputs.find(i => i.label === 'bufOvfl')!);\n\n    if (\n      seqNum === element.getAttribute('seqNum') &&\n      timeStamp === element.getAttribute('timeStamp') &&\n      dataSet === element.getAttribute('dataSet') &&\n      reasonCode === element.getAttribute('reasonCode') &&\n      dataRef === element.getAttribute('dataRef') &&\n      entryID === element.getAttribute('entryID') &&\n      configRef === element.getAttribute('configRef') &&\n      bufOvfl === element.getAttribute('bufOvfl')\n    )\n      return [];\n\n    const newElement = cloneElement(element, {\n      seqNum,\n      timeStamp,\n      dataSet,\n      reasonCode,\n      dataRef,\n      entryID,\n      configRef,\n      bufOvfl,\n    });\n\n    return [{ old: { element }, new: { element: newElement } }];\n  };\n}\n\nexport function editOptFieldsWizard(element: Element): Wizard {\n  const [\n    seqNum,\n    timeStamp,\n    dataSet,\n    reasonCode,\n    dataRef,\n    entryID,\n    configRef,\n    bufOvfl,\n  ] = [\n    'seqNum',\n    'timeStamp',\n    'dataSet',\n    'reasonCode',\n    'dataRef',\n    'entryID',\n    'configRef',\n    'bufOvfl',\n  ].map(optField => element.getAttribute(optField));\n\n  return [\n    {\n      title: get('wizard.title.edit', { tagName: element.tagName }),\n      primary: {\n        icon: 'save',\n        label: get('save'),\n        action: updateOptFieldsAction(element),\n      },\n      content: contentOptFieldsWizard({\n        seqNum,\n        timeStamp,\n        dataSet,\n        reasonCode,\n        dataRef,\n        entryID,\n        configRef,\n        bufOvfl,\n      }),\n    },\n  ];\n}\n"]}