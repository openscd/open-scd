{"version":3,"file":"SMVSubscriberMessageBinding.js","sourceRoot":"","sources":["../../src/editors/SMVSubscriberMessageBinding.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,IAAI,EACJ,UAAU,EACV,QAAQ,EACR,KAAK,GAEN,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAIpC,OAAO,iDAAiD,CAAC;AACzD,OAAO,0CAA0C,CAAC;AAClD,OAAO,4BAA4B,CAAC;AACpC,OAAO,EAAE,YAAY,EAAE,IAAI,EAAa,MAAM,8BAA8B,CAAC;AAE7E,kEAAkE;AAClE,IAAI,IAAI,GAAS,IAAI,CAAC,SAAS,CAAC;AAEhC,qEAAqE;AACrE,MAAM,CAAC,OAAO,OAAO,iCAAkC,SAAQ,UAAU;IAgBvE;QACE,KAAK,EAAE,CAAC;QAZV,cAAS,GAAG,CAAC,CAAC,CAAC;QAab,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,GAAc,EAAE,EAAE;YAC/C,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,YAAY;QACV,IAAI,IAAI,IAAI,CAAC,SAAS;YACpB,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE,CAAC;YACnD,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IACzD,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;8BACe,GAAG,CAAC,qCAAqC,CAAC;;;;;mBAKrD,GAAG,EAAE,CACZ,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;;8BAGtC,GAAG,CAAC,sCAAsC,CAAC;;;;;mBAKtD,GAAG,EAAE,CACZ,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;;;UAI3D,IAAI,IAAI,IAAI,CAAC,SAAS;YACtB,CAAC,CAAC,IAAI,CAAA;;2BAEW,IAAI,CAAC,SAAS;qBACpB,IAAI,CAAC,GAAG;yBACJ;YACf,CAAC,CAAC,IAAI,CAAA;;2BAEW,IAAI,CAAC,SAAS;qBACpB,IAAI,CAAC,GAAG;;yBAEJ;;;uBAGF,IAAI,CAAC,SAAS;iBACpB,IAAI,CAAC,GAAG;;;WAGd,CAAC;IACV,CAAC;;AAEM,wCAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;GAkBlB,CAAC;AAvFF;IADC,QAAQ,EAAE;8DACO;AAElB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oEACZ;AAGf;IADC,KAAK,CAAC,mBAAmB,CAAC;2EACM;AAGjC;IADC,KAAK,CAAC,oBAAoB,CAAC;4EACM;AAGlC;IADC,KAAK,CAAC,wBAAwB,CAAC;kEACd","sourcesContent":["import {\n  css,\n  html,\n  LitElement,\n  property,\n  query,\n  TemplateResult,\n} from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport { RadioListItem } from '@material/mwc-list/mwc-radio-list-item.js';\n\nimport './subscription/sampledvalues/subscriber-list.js';\nimport './subscription/sampledvalues/smv-list.js';\nimport './subscription/ied-list.js';\nimport { newViewEvent, View, ViewEvent } from './subscription/foundation.js';\n\n/** Defining view outside the class, which makes it persistent. */\nlet view: View = View.PUBLISHER;\n\n/** An editor [[`plugin`]] for subscribing IEDs to Sampled Values. */\nexport default class SMVSubscriberMessageBindingPlugin extends LitElement {\n  /** The document being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property()\n  doc!: XMLDocument;\n  @property({ type: Number })\n  editCount = -1;\n\n  @query('#smvPublisherView')\n  smvPublisherView!: RadioListItem;\n\n  @query('#smvSubscriberView')\n  smvSubscriberView!: RadioListItem;\n\n  @query('div[class=\"container\"]')\n  listDiv!: Element;\n\n  constructor() {\n    super();\n    this.addEventListener('view', (evt: ViewEvent) => {\n      view = evt.detail.view;\n      this.requestUpdate();\n    });\n  }\n\n  firstUpdated(): void {\n    view == View.PUBLISHER\n      ? this.smvPublisherView.setAttribute('checked', '')\n      : this.smvSubscriberView.setAttribute('checked', '');\n  }\n\n  render(): TemplateResult {\n    return html`<div>\n      <mwc-formfield label=\"${get('subscription.smv.view.publisherView')}\">\n        <mwc-radio\n          id=\"smvPublisherView\"\n          name=\"view\"\n          value=\"smv\"\n          @click=${() =>\n            this.listDiv.dispatchEvent(newViewEvent(View.PUBLISHER))}\n        ></mwc-radio>\n      </mwc-formfield>\n      <mwc-formfield label=\"${get('subscription.smv.view.subscriberView')}\">\n        <mwc-radio\n          id=\"smvSubscriberView\"\n          name=\"view\"\n          value=\"ied\"\n          @click=${() =>\n            this.listDiv.dispatchEvent(newViewEvent(View.SUBSCRIBER))}\n        ></mwc-radio>\n      </mwc-formfield>\n      <div class=\"container\">\n        ${view == View.PUBLISHER\n          ? html`<smv-list\n              class=\"row\"\n              .editCount=${this.editCount}\n              .doc=${this.doc}\n            ></smv-list>`\n          : html`<ied-list\n              class=\"row\"\n              .editCount=${this.editCount}\n              .doc=${this.doc}\n              serviceType=\"smv\"\n            ></ied-list>`}\n        <subscriber-list-smv\n          class=\"row\"\n          .editCount=${this.editCount}\n          .doc=${this.doc}\n        ></subscriber-list-smv>\n      </div>\n    </div>`;\n  }\n\n  static styles = css`\n    :host {\n      width: 100vw;\n    }\n\n    .container {\n      display: flex;\n      padding: 8px 6px 16px;\n      height: 86vh;\n    }\n\n    .row {\n      flex: 50%;\n      margin: 0px 6px 0px;\n      min-width: 300px;\n      height: 100%;\n      overflow-y: scroll;\n    }\n  `;\n}\n"]}