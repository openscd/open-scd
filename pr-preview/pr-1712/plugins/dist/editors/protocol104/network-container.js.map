{"version":3,"file":"network-container.js","sourceRoot":"","sources":["../../../src/editors/protocol104/network-container.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AACpC,OAAO,EAAE,GAAG,EAAE,aAAa,EAAE,IAAI,EAAkB,MAAM,aAAa,CAAC;AAEvE,OAAO,2BAA2B,CAAC;AACnC,OAAO,EACL,YAAY,EACZ,cAAc,GACf,MAAM,qCAAqC,CAAC;AAE7C,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAE7C,OAAO,EAAE,cAAc,EAAE,MAAM,+CAA+C,CAAC;AAC/E,OAAO,EAAE,sBAAsB,EAAE,MAAM,yBAAyB,CAAC;AACjE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAC;AAGvD,IAAM,mBAAmB,GAAzB,MAAM,mBAAoB,SAAQ,gBAAgB;IAC/C,qBAAqB;QAC3B,OAAO,KAAK,CAAC,IAAI,CACf,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,IAAI,EAAE,CAC9D;aACE,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC;aACtD,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;IAED,0EAA0E;IAClE,0BAA0B;QAChC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;QAC/D,IAAI,CAAC,MAAM,EAAE;YACX,IAAI,CAAC,aAAa,CAChB,cAAc,CAAC;gBACb,GAAG,EAAE;oBACH,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe;oBAChC,OAAO,EAAE,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,eAAe,EAAE,EAAE,CAAC;iBACtD;aACF,CAAC,CACH,CAAC;SACH;QACD,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,sBAAsB,CAAC,MAAO,CAAC,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;iBAGE,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,EAAE;;;UAG9C,IAAI,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAChC,UAAU,CAAC,EAAE,CACX,IAAI,CAAA;sBACM,IAAI,CAAC,GAAG;yBACL,UAAU;yCACM,CAChC;iBACQ,CAAC;IAChB,CAAC;;AAEM,0BAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;GAclB,CAAC;AAzDS,mBAAmB;IAD/B,aAAa,CAAC,uBAAuB,CAAC;GAC1B,mBAAmB,CA0D/B;SA1DY,mBAAmB","sourcesContent":["import { get } from 'lit-translate';\nimport { css, customElement, html, TemplateResult } from 'lit-element';\n\nimport './subnetwork-container.js';\nimport {\n  compareNames,\n  newWizardEvent,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport { createElement } from '@openscd/xml';\n\nimport { newActionEvent } from '@openscd/core/foundation/deprecated/editor.js';\nimport { createSubNetworkWizard } from './wizards/subnetwork.js';\nimport { Base104Container } from './base-container.js';\nimport { getTypeAttribute } from './foundation/foundation.js';\n\n@customElement('network-104-container')\nexport class Network104Container extends Base104Container {\n  private getSubNetworkElements(): Element[] {\n    return Array.from(\n      this.doc.querySelectorAll('Communication > SubNetwork') ?? []\n    )\n      .filter(network => getTypeAttribute(network) === '104')\n      .sort((a, b) => compareNames(a, b));\n  }\n\n  /** Opens a [[`WizardDialog`]] for creating a new `SubNetwork` element. */\n  private openCreateSubNetworkWizard(): void {\n    const parent = this.doc.querySelector(':root > Communication');\n    if (!parent) {\n      this.dispatchEvent(\n        newActionEvent({\n          new: {\n            parent: this.doc.documentElement,\n            element: createElement(this.doc, 'Communication', {}),\n          },\n        })\n      );\n    }\n    this.dispatchEvent(newWizardEvent(createSubNetworkWizard(parent!)));\n  }\n\n  render(): TemplateResult {\n    return html`<mwc-fab\n        extended\n        icon=\"add\"\n        label=\"${get('subnetwork.wizard.title.add')}\"\n        @click=${() => this.openCreateSubNetworkWizard()}\n      ></mwc-fab>\n      <section>\n        ${this.getSubNetworkElements().map(\n          subnetwork =>\n            html`<subnetwork-104-container\n              .doc=\"${this.doc}\"\n              .element=${subnetwork}\n            ></subnetwork-104-container>`\n        )}\n      </section>`;\n  }\n\n  static styles = css`\n    :host {\n      width: 100vw;\n    }\n\n    mwc-fab {\n      position: fixed;\n      bottom: 32px;\n      right: 32px;\n    }\n\n    subnetwork-104-container {\n      margin: 8px 12px 16px;\n    }\n  `;\n}\n"]}