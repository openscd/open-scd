{"version":3,"file":"lnodetype-wizard.js","sourceRoot":"","sources":["../../../src/editors/templates/lnodetype-wizard.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-button';\nimport '@material/mwc-list';\nimport '@material/mwc-list/mwc-list-item';\nimport '@material/mwc-select';\nimport { List } from '@material/mwc-list';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { Select } from '@material/mwc-select';\nimport { SingleSelectedEvent } from '@material/mwc-list/mwc-list-foundation';\n\nimport '@openscd/open-scd/src/wizard-checkbox.js';\nimport '@openscd/open-scd/src/wizard-textfield.js';\nimport '@openscd/open-scd/src/wizard-select.js';\nimport {\n  find,\n  getValue,\n  identity,\n  isPublic,\n  newSubWizardEvent,\n  newWizardEvent,\n  patterns,\n  Wizard,\n  WizardActor,\n  WizardInputElement,\n  WizardMenuActor,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport {\n  cloneElement,\n  createElement,\n  getChildElementsByTagName,\n} from '@openscd/xml';\n\nimport {\n  Create,\n  EditorAction,\n  newActionEvent,\n  Replace,\n} from '@openscd/core/foundation/deprecated/editor.js';\nimport { WizardSelect } from '@openscd/open-scd/src/wizard-select.js';\nimport {\n  addReferencedDataTypes,\n  allDataTypeSelector,\n  CreateOptions,\n  unifyCreateActionArray,\n  UpdateOptions,\n  WizardOptions,\n} from './foundation.js';\n\nfunction remove(element: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(\n      newActionEvent({ old: { parent: element.parentElement!, element } })\n    );\n    wizard.dispatchEvent(newWizardEvent());\n  };\n}\n\nfunction openAddDo(parent: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(newSubWizardEvent(() => dOWizard({ parent })!));\n  };\n}\n\nfunction updateDoAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const type = getValue(inputs.find(i => i.label === 'type')!)!;\n    const accessControl = getValue(\n      inputs.find(i => i.label === 'accessControl')!\n    );\n    const transient =\n      getValue(inputs.find(i => i.label === 'transient')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'transient')!)\n        : null;\n\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc') &&\n      type === element.getAttribute('type') &&\n      accessControl === element.getAttribute('accessControl') &&\n      transient === element.getAttribute('transient')\n    ) {\n      return [];\n    }\n\n    const newElement = cloneElement(element, {\n      name,\n      desc,\n      type,\n      accessControl,\n      transient,\n    });\n\n    return [{ old: { element }, new: { element: newElement } }];\n  };\n}\n\nfunction createDoAction(parent: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const type = getValue(inputs.find(i => i.label === 'type')!);\n    const accessControl = getValue(\n      inputs.find(i => i.label === 'accessControl')!\n    );\n    const transient =\n      getValue(inputs.find(i => i.label === 'transient')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'transient')!)\n        : null;\n\n    const actions: EditorAction[] = [];\n\n    const element = createElement(parent.ownerDocument, 'DO', {\n      name,\n      desc,\n      type,\n      accessControl,\n      transient,\n    });\n    actions.push({\n      new: {\n        parent,\n        element,\n      },\n    });\n\n    return actions;\n  };\n}\n\nfunction dOWizard(options: WizardOptions): Wizard | undefined {\n  const doc = (<UpdateOptions>options).doc\n    ? (<UpdateOptions>options).doc\n    : (<CreateOptions>options).parent.ownerDocument;\n  const DO = find(doc, 'DO', (<UpdateOptions>options).identity ?? NaN);\n\n  const [\n    title,\n    action,\n    type,\n    menuActions,\n    name,\n    desc,\n    accessControl,\n    transient,\n  ] = DO\n    ? [\n        get('do.wizard.title.edit'),\n        updateDoAction(DO),\n        DO.getAttribute('type'),\n        [\n          {\n            icon: 'delete',\n            label: get('remove'),\n            action: remove(DO),\n          },\n        ],\n        DO.getAttribute('name'),\n        DO.getAttribute('desc'),\n        DO.getAttribute('accessControl'),\n        DO.getAttribute('transient'),\n      ]\n    : [\n        get('do.wizard.title.add'),\n        createDoAction((<CreateOptions>options).parent),\n        null,\n        undefined,\n        '',\n        null,\n        null,\n        null,\n      ];\n\n  const types = Array.from(doc.querySelectorAll('DOType'))\n    .filter(isPublic)\n    .filter(type => type.getAttribute('id'));\n\n  return [\n    {\n      title,\n      element: DO ?? undefined,\n      primary: { icon: '', label: get('save'), action },\n      menuActions,\n      content: [\n        html`<wizard-textfield\n          label=\"name\"\n          .maybeValue=${name}\n          helper=\"${get('scl.name')}\"\n          required\n          pattern=\"${patterns.alphanumericFirstUpperCase}\"\n          dialogInitialFocus\n        >\n          ></wizard-textfield\n        >`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${desc}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-select\n          fixedMenuPosition\n          label=\"type\"\n          required\n          helper=\"${get('scl.type')}\"\n          >${types.map(\n            dataType =>\n              html`<mwc-list-item\n                value=${dataType.id}\n                ?selected=${dataType.id === type}\n                >${dataType.id}</mwc-list-item\n              >`\n          )}</mwc-select\n        >`,\n        html`<wizard-textfield\n          label=\"accessControl\"\n          helper=\"${get('scl.accessControl')}\"\n          .maybeValue=${accessControl}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<wizard-checkbox\n          label=\"transient\"\n          .maybeValue=\"${transient}\"\n          helper=\"${get('scl.transient')}\"\n          nullable\n        ></wizard-checkbox>`,\n      ],\n    },\n  ];\n}\n\nfunction getDescendantClasses(\n  nsd74: XMLDocument,\n  base: string,\n  otherNsd?: XMLDocument\n): Element[] {\n  if (base === '') return [];\n\n  const currentNsd =\n    !otherNsd ||\n    nsd74.querySelector(\n      `LNClass[name=\"${base}\"], AbstractLNClass[name=\"${base}\"]`\n    )\n      ? nsd74\n      : otherNsd;\n\n  const descendants = Array.from(\n    nsd74.querySelectorAll(\n      `LNClass[name=\"${base}\"], AbstractLNClass[name=\"${base}\"]`\n    )\n  );\n\n  const otherDescendants = Array.from(\n    otherNsd?.querySelectorAll(\n      `LNClass[name=\"${base}\"], AbstractLNClass[name=\"${base}\"]`\n    ) ?? []\n  );\n\n  const parentDescendants = getDescendantClasses(\n    nsd74,\n    currentNsd\n      .querySelector(`LNClass[name=\"${base}\"], AbstractLNClass[name=\"${base}\"]`)\n      ?.getAttribute('base') ?? '',\n    otherNsd\n  );\n  return parentDescendants.concat(descendants, otherDescendants);\n}\n\nfunction getAllDataObjects(\n  nsd74: XMLDocument,\n  base: string,\n  nsd7420?: XMLDocument\n): Element[] {\n  const lnodeclasses = getDescendantClasses(nsd74, base, nsd7420);\n\n  return lnodeclasses.flatMap(lnodeclass =>\n    Array.from(lnodeclass.querySelectorAll('DataObject'))\n  );\n}\n\nfunction createNewLNodeType(parent: Element, element: Element): WizardActor {\n  return (_: WizardInputElement[], wizard: Element): EditorAction[] => {\n    const selected = Array.from(\n      wizard.shadowRoot!.querySelectorAll<WizardSelect>('wizard-select')\n    ).filter(select => select.maybeValue);\n\n    const actions: Create[] = [];\n\n    selected.forEach(select => {\n      const DO = createElement(parent.ownerDocument, 'DO', {\n        name: select.label,\n        type: select.value,\n      });\n\n      actions.push({\n        new: {\n          parent: element,\n          element: DO,\n        },\n      });\n    });\n\n    actions.push({\n      new: {\n        parent,\n        element,\n      },\n    });\n\n    return actions;\n  };\n}\n\nfunction doComparator(name: string) {\n  return (a: Element, b: Element) => {\n    const idA = a.getAttribute('id') ?? '';\n    const idB = b.getAttribute('id') ?? '';\n\n    const aHasName = idA.includes(name);\n    const bHasName = idB.includes(name);\n\n    if (!aHasName && bHasName) return 1;\n    if (aHasName && !bHasName) return -1;\n\n    return idA.localeCompare(idB);\n  };\n}\n\nfunction createLNodeTypeHelperWizard(\n  parent: Element,\n  element: Element,\n  allDo: Element[]\n): Wizard {\n  return [\n    {\n      title: get('lnodetype.wizard.title.select'),\n      primary: {\n        label: get('save'),\n        icon: '',\n        action: createNewLNodeType(parent, element),\n      },\n      content: allDo.map(DO => {\n        const presCond = DO.getAttribute('presCond');\n        const name = DO.getAttribute('name') ?? '';\n        const validDOTypes = Array.from(\n          parent\n            .closest('DataTypeTemplates')!\n            .querySelectorAll(`DOType[cdc=\"${DO.getAttribute('type')}\"]`)\n        ).sort(doComparator(name));\n\n        return html`<wizard-select\n          fixedMenuPosition\n          naturalMenuWidth\n          label=\"${name}\"\n          ?required=${presCond === 'M'}\n          ?nullable=${presCond !== 'M'}\n          .maybeValue=${null}\n          >${validDOTypes.map(\n            doType =>\n              html`<mwc-list-item value=\"${doType.getAttribute('id')!}\"\n                >${doType.getAttribute('id')}</mwc-list-item\n              >`\n          )}</wizard-select\n        >`;\n      }),\n    },\n  ];\n}\n\nfunction addPredefinedLNodeType(\n  parent: Element,\n  newLNodeType: Element,\n  templateLNodeType: Element\n): Create[] {\n  const actions: Create[] = [];\n  addReferencedDataTypes(templateLNodeType, parent).forEach(action =>\n    actions.push(action)\n  );\n\n  actions.push({\n    new: {\n      parent,\n      element: newLNodeType,\n    },\n  });\n\n  return unifyCreateActionArray(actions);\n}\n\nfunction startLNodeTypeCreate(\n  parent: Element,\n  templates: XMLDocument,\n  nsd74: XMLDocument,\n  nsd7420: XMLDocument\n): WizardActor {\n  return (inputs: WizardInputElement[], wizard: Element): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!);\n    if (!id) return [];\n\n    const existId = Array.from(\n      templates.querySelectorAll(allDataTypeSelector)\n    ).some(type => type.getAttribute('id') === id);\n    if (existId) return [];\n\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n\n    const value = (<Select>inputs.find(i => i.label === 'lnClass'))?.selected\n      ?.value;\n    const templateLNodeType = value\n      ? find(templates, 'LNodeType', value)\n      : null;\n\n    const newLNodeType = templateLNodeType\n      ? <Element>templateLNodeType!.cloneNode(true)\n      : createElement(parent.ownerDocument, 'LNodeType', {\n          lnClass: value ?? '',\n        });\n\n    newLNodeType.setAttribute('id', id);\n    if (desc) newLNodeType.setAttribute('desc', desc);\n\n    if (templateLNodeType)\n      return addPredefinedLNodeType(parent, newLNodeType, templateLNodeType);\n\n    const allDo = getAllDataObjects(nsd74, value!, nsd7420);\n    wizard.dispatchEvent(\n      newWizardEvent(createLNodeTypeHelperWizard(parent, newLNodeType, allDo))\n    );\n\n    wizard.dispatchEvent(newWizardEvent());\n    return [];\n  };\n}\n\nfunction onLnClassChange(e: Event, templates: XMLDocument): void {\n  const identity = (<Select>e.target).selected?.value;\n  const lnodetype = identity ? find(templates, 'LNodeType', identity) : null;\n\n  const primaryAction =\n    (<Element>e.target)\n      ?.closest('mwc-dialog')\n      ?.querySelector('mwc-button[slot=\"primaryAction\"]') ?? null;\n\n  if (lnodetype) {\n    primaryAction?.setAttribute('label', get('save'));\n    primaryAction?.setAttribute('icon', 'save');\n  } else {\n    primaryAction?.setAttribute('label', get('next') + '...');\n    primaryAction?.setAttribute('icon', '');\n  }\n}\n\nexport function createLNodeTypeWizard(\n  parent: Element,\n  templates: Document,\n  nsd74: XMLDocument,\n  nsd7420: XMLDocument\n): Wizard {\n  return [\n    {\n      title: get('lnodetype.wizard.title.add'),\n      primary: {\n        icon: '',\n        label: get('next') + '...',\n        action: startLNodeTypeCreate(parent, templates, nsd74, nsd7420),\n      },\n      content: [\n        html`<mwc-select\n          id=\"lnclassnamelist\"\n          fixedMenuPosition\n          outlined\n          icon=\"playlist_add_check\"\n          label=\"lnClass\"\n          helper=\"Default logical nodes\"\n          required\n          dialogInitialFocus\n          @selected=${(e: Event) => onLnClassChange(e, templates)}\n        >\n          <mwc-list-item noninteractive\n            >Pre-defined lnClasses from templates</mwc-list-item\n          >\n          <li divider role=\"separator\"></li>\n          ${Array.from(templates.querySelectorAll('LNodeType')).map(\n            lnodetpye => {\n              const lnClass = lnodetpye.getAttribute('lnClass') ?? '';\n              const desc = lnodetpye.getAttribute('desc') ?? '';\n\n              return html`<mwc-list-item\n                twoline\n                style=\"min-width:200px\"\n                graphic=\"icon\"\n                hasMeta\n                value=\"${identity(lnodetpye)}\"\n                ><span>${lnClass}</span>\n                <span slot=\"secondary\">${desc}</span>\n                <span slot=\"meta\"\n                  >${getChildElementsByTagName(lnodetpye, 'DO').length}</span\n                >\n              </mwc-list-item>`;\n            }\n          )}\n          <mwc-list-item noninteractive\n            >Empty lnClasses from IEC 61850-7-4</mwc-list-item\n          >\n          <li divider role=\"separator\"></li>\n          ${Array.from(nsd74.querySelectorAll('LNClasses > LNClass')).map(\n            lnClass => {\n              const className = lnClass.getAttribute('name') ?? '';\n              return html`<mwc-list-item\n                style=\"min-width:200px\"\n                graphic=\"icon\"\n                hasMeta\n                value=\"${className}\"\n                ><span>${className}</span>\n                <span slot=\"meta\"\n                  >${getAllDataObjects(nsd74, className, nsd7420).length}</span\n                >\n              </mwc-list-item>`;\n            }\n          )}\n          <mwc-list-item noninteractive\n            >Empty lnClasses from IEC 61850-7-420</mwc-list-item\n          >\n          <li divider role=\"separator\"></li>\n          ${Array.from(nsd7420.querySelectorAll('LNClasses > LNClass')).map(\n            lnClass => {\n              const className = lnClass.getAttribute('name') ?? '';\n              return html`<mwc-list-item\n                style=\"min-width:200px\"\n                graphic=\"icon\"\n                hasMeta\n                value=\"${className}\"\n                ><span>${className}</span>\n                <span slot=\"meta\"\n                  >${getAllDataObjects(nsd74, className, nsd7420).length}</span\n                >\n              </mwc-list-item>`;\n            }\n          )}\n        </mwc-select>`,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${get('scl.id')}\"\n          .maybeValue=${''}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${null}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n      ],\n    },\n  ];\n}\n\nfunction updateLNodeTypeAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const lnClass = getValue(inputs.find(i => i.label === 'lnClass')!)!;\n\n    if (\n      id === element.getAttribute('id') &&\n      desc === element.getAttribute('desc') &&\n      lnClass == element.getAttribute('lnClass')\n    )\n      return [];\n\n    const newElement = cloneElement(element, { id, desc, lnClass });\n\n    const actions: Replace[] = [];\n    actions.push({ old: { element }, new: { element: newElement } });\n\n    const oldId = element.getAttribute('id')!;\n    Array.from(\n      element.ownerDocument.querySelectorAll(\n        `LN0[lnType=\"${oldId}\"], LN[lnType=\"${oldId}\"]`\n      )\n    ).forEach(oldAnyLn => {\n      const newAnyLn = <Element>oldAnyLn.cloneNode(false);\n      newAnyLn.setAttribute('lnType', id);\n\n      actions.push({ old: { element: oldAnyLn }, new: { element: newAnyLn } });\n    });\n\n    return [\n      { title: get('lnodetype.action.edit', { oldId, newId: id }), actions },\n    ];\n  };\n}\n\nexport function lNodeTypeWizard(\n  lNodeTypeIdentity: string,\n  doc: XMLDocument\n): Wizard | undefined {\n  const lnodetype = find(doc, 'LNodeType', lNodeTypeIdentity);\n  if (!lnodetype) return undefined;\n\n  return [\n    {\n      title: get('lnodetype.wizard.title.edit'),\n      element: lnodetype,\n      primary: {\n        icon: '',\n        label: get('save'),\n        action: updateLNodeTypeAction(lnodetype),\n      },\n      menuActions: [\n        {\n          label: get('remove'),\n          icon: 'delete',\n          action: remove(lnodetype),\n        },\n        {\n          label: get('scl.DO'),\n          icon: 'playlist_add',\n          action: openAddDo(lnodetype),\n        },\n      ],\n      content: [\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${get('scl.id')}\"\n          .maybeValue=${lnodetype.getAttribute('id')}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${lnodetype.getAttribute('desc')}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"lnClass\"\n          helper=\"${get('scl.lnClass')}\"\n          .maybeValue=${lnodetype.getAttribute('lnClass')}\n          required\n          pattern=\"${patterns.lnClass}\"\n        ></wizard-textfield>`,\n        html`\n          <mwc-list\n            style=\"margin-top: 0px;\"\n            @selected=${(e: SingleSelectedEvent) => {\n              const wizard = dOWizard({\n                identity: (<ListItem>(<List>e.target).selected).value,\n                doc,\n              });\n\n              if (wizard) e.target!.dispatchEvent(newSubWizardEvent(wizard));\n            }}\n          >\n            ${Array.from(lnodetype.querySelectorAll('DO')).map(\n              doelement =>\n                html`<mwc-list-item\n                  twoline\n                  tabindex=\"0\"\n                  value=\"${identity(doelement)}\"\n                  ><span>${doelement.getAttribute('name')}</span\n                  ><span slot=\"secondary\"\n                    >${'#' + doelement.getAttribute('type')}</span\n                  ></mwc-list-item\n                >`\n            )}\n          </mwc-list>\n        `,\n      ],\n    },\n  ];\n}\n"]}