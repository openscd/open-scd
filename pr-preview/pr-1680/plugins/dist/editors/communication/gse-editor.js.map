{"version":3,"file":"gse-editor.js","sourceRoot":"","sources":["../../../src/editors/communication/gse-editor.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,UAAU,EAEV,IAAI,EACJ,aAAa,EACb,QAAQ,EACR,KAAK,EACL,GAAG,GACJ,MAAM,aAAa,CAAC;AAErB,OAAO,oBAAoB,CAAC;AAE5B,OAAO,sCAAsC,CAAC;AAC9C,OAAO,EAAE,cAAc,EAAE,MAAM,qCAAqC,CAAC;AACrE,OAAO,EAAE,cAAc,EAAE,MAAM,+CAA+C,CAAC;AAC/E,OAAO,EAAE,gBAAgB,EAAE,MAAM,sCAAsC,CAAC;AACxE,OAAO,EAAE,aAAa,EAAE,MAAM,sBAAsB,CAAC;AACrD,OAAO,EAAE,2BAA2B,EAAE,MAAM,iBAAiB,CAAC;AAGvD,IAAM,SAAS,GAAf,MAAM,SAAU,SAAQ,UAAU;IAQvC,IAAI,KAAK;QACP,OAAO,CACL,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC;YACnC,GAAG;YACH,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CACpC,CAAC;IACJ,CAAC;IAEO,cAAc;QACpB,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC;IAEO,iBAAiB;QACvB,IAAI,CAAC,aAAa,CAChB,IAAI,WAAW,CAAC,kBAAkB,EAAE;YAClC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE;YACjC,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI;SACf,CAAC,CACH,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,OAAO;YACd,IAAI,CAAC,aAAa,CAChB,cAAc,CAAC;gBACb,GAAG,EAAE;oBACH,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,aAAc;oBACnC,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;iBACpC;aACF,CAAC,CACH,CAAC;IACN,CAAC;IAED,MAAM;QACJ,MAAM,wBAAwB,GAAG,2BAA2B,CAC1D,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,GAAG,CACT,CAAC;QACF,MAAM,yBAAyB,GAAG,wBAAwB,CAAC,MAAM,GAAG,CAAC,CAAC;QAEtE,OAAO,IAAI,CAAA,uBAAuB,IAAI,CAAC,KAAK,YAAY,gBAAgB;;;;;kBAK1D,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE;;;;;;kBAM3B,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;;;;;;;qBAOhB,CAAC,yBAAyB;kBAC7B,GAAG,EAAE,CAAC,IAAI,CAAC,iBAAiB,EAAE;;;oBAG5B,CAAC;IACnB,CAAC;;AAEM,gBAAM,GAAG,GAAG,CAAA;;;;;;;GAOlB,CAAC;AAhFF;IADC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCACb;AAGlB;IADC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;0CACb;AAGlB;IADC,KAAK,EAAE;sCAOP;AAdU,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAmFrB;SAnFY,SAAS","sourcesContent":["import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  property,\n  state,\n  css,\n} from 'lit-element';\n\nimport '@material/mwc-icon';\n\nimport '@openscd/open-scd/src/action-icon.js';\nimport { newWizardEvent } from '@openscd/open-scd/src/foundation.js';\nimport { newActionEvent } from '@openscd/core/foundation/deprecated/editor.js';\nimport { sizableGooseIcon } from '@openscd/open-scd/src/icons/icons.js';\nimport { editGseWizard } from '../../wizards/gse.js';\nimport { getAllConnectedAPsOfSameIED } from './foundation.js';\n\n@customElement('gse-editor')\nexport class GseEditor extends LitElement {\n  @property({ attribute: false })\n  doc!: XMLDocument;\n\n  @property({ attribute: false })\n  element!: Element;\n\n  @state()\n  get label(): string {\n    return (\n      this.element.getAttribute('ldInst') +\n      '/' +\n      this.element.getAttribute('cbName')\n    );\n  }\n\n  private openEditWizard(): void {\n    this.dispatchEvent(newWizardEvent(editGseWizard(this.element)));\n  }\n\n  private openGseMoveDialog(): void {\n    this.dispatchEvent(\n      new CustomEvent('request-gse-move', {\n        detail: { element: this.element },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  remove(): void {\n    if (this.element)\n      this.dispatchEvent(\n        newActionEvent({\n          old: {\n            parent: this.element.parentElement!,\n            element: this.element,\n            reference: this.element.nextSibling,\n          },\n        })\n      );\n  }\n\n  render(): TemplateResult {\n    const allConnectedAPsOfSameIED = getAllConnectedAPsOfSameIED(\n      this.element,\n      this.doc\n    );\n    const hasMoreThanOneConnectedAP = allConnectedAPsOfSameIED.length > 1;\n\n    return html`<action-icon label=\"${this.label}\" .icon=\"${sizableGooseIcon}\"\n      ><mwc-fab\n        slot=\"action\"\n        mini\n        icon=\"edit\"\n        @click=\"${() => this.openEditWizard()}\"\n      ></mwc-fab>\n      <mwc-fab\n        slot=\"action\"\n        mini\n        icon=\"delete\"\n        @click=\"${() => this.remove()}\"\n      ></mwc-fab>\n      <mwc-fab\n        slot=\"action\"\n        mini\n        icon=\"forward\"\n        class=\"gse-move-button\"\n        ?disabled=\"${!hasMoreThanOneConnectedAP}\"\n        @click=\"${() => this.openGseMoveDialog()}\"\n      >\n      </mwc-fab>\n    </action-icon> `;\n  }\n\n  static styles = css`\n    :host(:focus-within) .gse-move-button[disabled] {\n      color: var(--mdc-theme-text-disabled-on-light, #9e9e9e);\n      pointer-events: none;\n      cursor: not-allowed;\n      opacity: 0.5;\n    }\n  `;\n}\n"]}