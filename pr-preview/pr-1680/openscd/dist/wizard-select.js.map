{"version":3,"file":"wizard-select.js","sourceRoot":"","sources":["../src/wizard-select.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  customElement,\n  html,\n  state,\n  property,\n  query,\n  TemplateResult,\n} from 'lit-element';\n\nimport '@material/mwc-switch';\nimport { Switch } from '@material/mwc-switch';\nimport { Select } from '@material/mwc-select';\n\n/** A potentially `nullable` `Select`.\n *\n * NB: Use `maybeValue: string | null` instead of `value` if `nullable`!*/\n@customElement('wizard-select')\nexport class WizardSelect extends Select {\n  /** Whether [[`maybeValue`]] may be `null` */\n  @property({ type: Boolean })\n  nullable = false;\n  private isNull = false;\n  @state()\n  private get null(): boolean {\n    return this.nullable && this.isNull;\n  }\n  private set null(value: boolean) {\n    if (!this.nullable || value === this.isNull) return;\n    this.isNull = value;\n    if (this.null) this.disable();\n    else this.enable();\n  }\n  /** Replacement for `value`, can only be `null` if [[`nullable`]]. */\n  @property({ type: String })\n  get maybeValue(): string | null {\n    return this.null ? null : this.value;\n  }\n  set maybeValue(value: string | null) {\n    if (value === null) this.null = true;\n    else {\n      this.null = false;\n      this.value = value;\n    }\n  }\n  /** The default `value` displayed if [[`maybeValue`]] is `null`. */\n  @property({ type: String })\n  defaultValue = '';\n  /** Additional values that cause validation to fail. */\n  @property({ type: Array })\n  reservedValues: string[] = [];\n\n  // FIXME: workaround to allow disable of the whole component - need basic refactor\n  private disabledSwitch = false;\n\n  @query('mwc-switch') nullSwitch?: Switch;\n\n  private nulled: string | null = null;\n\n  private enable(): void {\n    if (this.nulled === null) return;\n    this.value = this.nulled;\n    this.nulled = null;\n    this.disabled = false;\n  }\n\n  private disable(): void {\n    if (this.nulled !== null) return;\n    this.nulled = this.value;\n    this.value = this.defaultValue;\n    this.disabled = true;\n  }\n\n  async firstUpdated(): Promise<void> {\n    await super.firstUpdated();\n  }\n\n  checkValidity(): boolean {\n    if (this.nullable && !this.nullSwitch?.checked) return true;\n    return super.checkValidity();\n  }\n\n  constructor() {\n    super();\n\n    this.disabledSwitch = this.hasAttribute('disabled');\n  }\n\n  renderSwitch(): TemplateResult {\n    if (this.nullable) {\n      return html`<mwc-switch\n        style=\"margin-left: 12px;\"\n        ?checked=${!this.null}\n        ?disabled=${this.disabledSwitch}\n        @change=${() => {\n          this.null = !this.nullSwitch!.checked;\n        }}\n      ></mwc-switch>`;\n    }\n    return html``;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <div style=\"display: flex; flex-direction: row;\">\n        <div style=\"flex: auto;\">${super.render()}</div>\n        <div style=\"display: flex; align-items: center; height: 56px;\">\n          ${this.renderSwitch()}\n        </div>\n      </div>\n    `;\n  }\n}\n"]}