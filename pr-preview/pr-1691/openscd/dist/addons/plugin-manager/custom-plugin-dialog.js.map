{"version":3,"file":"custom-plugin-dialog.js","sourceRoot":"","sources":["../../../src/addons/plugin-manager/custom-plugin-dialog.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport {\n  customElement,\n  html,\n  LitElement,\n  query,\n  TemplateResult,\n  css,\n} from 'lit-element';\nimport { get } from 'lit-translate';\nimport {\n  newAddExternalPluginEvent,\n  pluginIcons\n} from '../../open-scd.js';\n\nimport {\n  MenuPosition,\n  menuPosition,\n  PluginKind\n} from \"../../plugin.js\";\n\nimport type { Button } from '@material/mwc-button';\nimport type { Dialog } from '@material/mwc-dialog';\nimport { List } from '@material/mwc-list';\nimport type { ListItem } from '@material/mwc-list/mwc-list-item';\nimport type { Select } from '@material/mwc-select';\nimport type { Switch } from '@material/mwc-switch';\nimport type { TextField } from '@material/mwc-textfield';\n\nimport '@material/mwc-dialog';\nimport '@material/mwc-drawer';\nimport '@material/mwc-list';\nimport '@material/mwc-select';\nimport '@material/mwc-switch';\nimport '@material/mwc-textfield';\n\n\n@customElement('oscd-custom-plugin-dialog')\nexport class OscdCustomPluginDialog extends LitElement {\n\n  @query('#dialog') dialog!: Dialog\n  @query('#pluginSrcInput') pluginSrcInput!: TextField\n  @query('#pluginNameInput') pluginNameInput!: TextField\n  @query('#pluginKindList') pluginKindList!: List\n  @query('#requireDoc') requireDoc!: Switch\n  @query('#positionList') positionList!: Select\n  @query('#addButton') addButton!: Button\n\n  render(): TemplateResult {\n    return html`\n      <mwc-dialog id=\"dialog\" heading=\"${get('plugins.add.heading')}\">\n        <div style=\"display: flex; flex-direction: column; row-gap: 8px;\">\n          <p style=\"color:var(--mdc-theme-error);\">\n            ${get('plugins.add.warning')}\n          </p>\n          <mwc-textfield\n            label=\"${get('plugins.add.name')}\"\n            helper=\"${get('plugins.add.nameHelper')}\"\n            required\n            id=\"pluginNameInput\"\n          ></mwc-textfield>\n          <mwc-list id=\"pluginKindList\">\n            <mwc-radio-list-item\n              id=\"editor\"\n              value=\"editor\"\n              hasMeta\n              selected\n              left\n            >\n              ${get('plugins.editor')}\n              <mwc-icon slot=\"meta\">\n                ${pluginIcons['editor']}\n              </mwc-icon>\n            </mwc-radio-list-item>\n            <mwc-radio-list-item value=\"menu\" hasMeta left>\n              ${get('plugins.menu')}\n            <mwc-icon slot=\"meta\">\n              ${pluginIcons['menu']}\n            </mwc-icon>\n            </mwc-radio-list-item>\n            <div id=\"menudetails\">\n              <mwc-formfield\n                id=\"enabledefault\"\n                label=\"${get('plugins.requireDoc')}\"\n              >\n                <mwc-switch id=\"requireDoc\" checked></mwc-switch>\n              </mwc-formfield>\n              <mwc-select id=\"positionList\" value=\"middle\" fixedpositionList>\n                ${Object.values(menuPosition).map(\n                  menutype =>\n                    html`<mwc-list-item value=\"${menutype}\"\n                      >${get('plugins.' + menutype)}</mwc-list-item\n                    >`\n                )}\n              </mwc-select>\n            </div>\n            <style>\n              #menudetails {\n                display: none;\n                padding: 20px;\n                padding-left: 50px;\n              }\n              #pluginKindList [value=\"menu\"][selected] ~ #menudetails {\n                display: grid;\n              }\n              #enabledefault {\n                padding-bottom: 20px;\n              }\n              #positionList {\n                max-width: 250px;\n              }\n            </style>\n            <mwc-radio-list-item id=\"validator\" value=\"validator\" hasMeta left>\n              ${get('plugins.validator')}\n              <mwc-icon slot=\"meta\">\n                ${pluginIcons['validator']}\n              </mwc-icon>\n            </mwc-radio-list-item>\n          </mwc-list>\n          <mwc-textfield\n            label=\"${get('plugins.add.src')}\"\n            helper=\"${get('plugins.add.srcHelper')}\"\n            placeholder=\"http://example.com/plugin.js\"\n            type=\"url\"\n            required\n            id=\"pluginSrcInput\">\n          </mwc-textfield>\n        </div>\n        <mwc-button\n          slot=\"secondaryAction\"\n          dialogAction=\"close\"\n          label=\"${get('cancel')}\">\n        </mwc-button>\n        <mwc-button\n          id=\"addButton\"\n          slot=\"primaryAction\"\n          icon=\"add\"\n          label=\"${get('add')}\"\n          trailingIcon\n          @click=${() => this.handleAddPlugin()}>\n        </mwc-button>\n      </mwc-dialog>\n    `;\n  }\n\n  static styles = css`\n\n    mwc-dialog {\n      --mdc-dialog-max-width: 98vw;\n    }\n\n    mwc-dialog > form {\n      display: flex;\n      flex-direction: column;\n    }\n\n    mwc-dialog > form > * {\n      display: block;\n      margin-top: 16px;\n    }\n  `\n\n  public close(){\n    this.dialog.close()\n  }\n\n  public show(){\n    this.dialog.show()\n  }\n\n  get open(){\n    return this.dialog.open\n  }\n\n  private handleAddPlugin() {\n\n    if (\n      !(\n        this.pluginSrcInput.checkValidity() &&\n        this.pluginNameInput.checkValidity() &&\n        this.pluginKindList.selected &&\n        this.requireDoc &&\n        this.positionList.selected\n      )\n    )\n      return;\n\n    this.dispatchEvent(\n      newAddExternalPluginEvent({\n        src: this.pluginSrcInput.value,\n        name: this.pluginNameInput.value,\n        kind: <PluginKind>(<ListItem>this.pluginKindList.selected).value,\n        requireDoc: this.requireDoc.checked,\n        position: <MenuPosition>this.positionList.value,\n        active: true,\n        // this is an added plugin and will be remove by reset either way\n        activeByDefault: false,\n      })\n    );\n\n    this.requestUpdate();\n    this.dialog.close();\n  }\n\n}\n\n\n"]}