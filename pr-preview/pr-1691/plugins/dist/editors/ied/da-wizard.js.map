{"version":3,"file":"da-wizard.js","sourceRoot":"","sources":["../../../src/editors/ied/da-wizard.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit-element';\nimport { TemplateResult } from 'lit-html';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-textarea';\nimport '@material/mwc-textfield';\n\nimport {\n  getDescriptionAttribute,\n  getInstanceAttribute,\n  getNameAttribute,\n  Wizard,\n} from '@openscd/open-scd/src/foundation.js';\nimport { Nsdoc } from '@openscd/open-scd/src/foundation/nsdoc.js';\nimport {\n  findDOTypeElement,\n  findElement,\n  findLogicaNodeElement,\n  getValueElements,\n} from './foundation.js';\n\nfunction getValues(element: Element): string {\n  const hasValue = getValueElements(element).length !== 0;\n\n  return hasValue\n    ? `${getValueElements(element)\n        .map(val => val.textContent ?? '')\n        .join(', ')}`\n    : '-';\n}\n\nfunction renderFields(\n  element: Element,\n  instanceElement: Element | undefined,\n  ancestors: Element[],\n  nsdoc: Nsdoc\n): TemplateResult[] {\n  const iedElement = findElement(ancestors, 'IED');\n  const accessPointElement = findElement(ancestors, 'AccessPoint');\n  const lDeviceElement = findElement(ancestors, 'LDevice');\n  const logicalNodeElement = findLogicaNodeElement(ancestors);\n  const doElement = findElement(ancestors, 'DO');\n  const doTypeElement = findDOTypeElement(doElement);\n\n  return [\n    html`\n      <mwc-textarea\n        label=\"${get('iededitor.wizard.nsdocDescription')}\"\n        value=\"${nsdoc.getDataDescription(element, ancestors).label}\"\n        rows=\"3\"\n        cols=\"50\"\n        id=\"nsdocDescription\"\n        readonly\n        disabled\n      >\n      </mwc-textarea>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.daName')}\"\n        value=\"${getNameAttribute(element) ?? '-'}\"\n        id=\"daName\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.daiDescription')}\"\n        value=\"${instanceElement\n          ? getDescriptionAttribute(instanceElement) ?? '-'\n          : '-'}\"\n        id=\"daiDescription\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.daFc')}\"\n        value=\"${element.getAttribute('fc') ?? '-'}\"\n        id=\"daFc\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.daBType')}\"\n        value=\"${element.getAttribute('bType') ?? '-'}\"\n        id=\"daBType\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.daValue')}\"\n        value=\"${instanceElement\n          ? getValues(instanceElement)\n          : getValues(element)}\"\n        id=\"daValue\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html` <br /> `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.doName')}\"\n        value=\"${doElement ? getNameAttribute(doElement) ?? '-' : '-'}\"\n        id=\"doName\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.doCdc')}\"\n        value=\"${doTypeElement?.getAttribute('cdc') ?? '-'}\"\n        id=\"doCdc\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html` <br /> `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.lnPrefix')}\"\n        value=\"${logicalNodeElement\n          ? logicalNodeElement.getAttribute('prefix') ?? '-'\n          : '-'}\"\n        id=\"lnPrefix\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('scl.lnClass')}\"\n        value=\"${logicalNodeElement\n          ? nsdoc.getDataDescription(logicalNodeElement, ancestors).label\n          : '-'}\"\n        id=\"lnPrefix\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.lnInst')}\"\n        value=\"${logicalNodeElement\n          ? getInstanceAttribute(logicalNodeElement) ?? '-'\n          : '-'}\"\n        id=\"lnInst\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html` <br /> `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.lDevice')}\"\n        value=\"${lDeviceElement\n          ? getNameAttribute(lDeviceElement) ??\n            getInstanceAttribute(lDeviceElement) ??\n            '-'\n          : '-'}\"\n        id=\"lDevice\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.accessPoint')}\"\n        value=\"${accessPointElement\n          ? getNameAttribute(accessPointElement) ?? '-'\n          : '-'}\"\n        id=\"accessPoint\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n    html`\n      <mwc-textfield\n        label=\"${get('iededitor.wizard.ied')}\"\n        value=\"${iedElement ? getNameAttribute(iedElement) ?? '-' : '-'}\"\n        id=\"ied\"\n        readonly\n        disabled\n      >\n      </mwc-textfield>\n    `,\n  ];\n}\n\nexport function createDaInfoWizard(\n  element: Element,\n  instanceElement: Element | undefined,\n  ancestors: Element[],\n  nsdoc: Nsdoc\n): Wizard {\n  return [\n    {\n      title: get('iededitor.wizard.daTitle'),\n      content: [...renderFields(element, instanceElement, ancestors, nsdoc)],\n    },\n  ];\n}\n"]}