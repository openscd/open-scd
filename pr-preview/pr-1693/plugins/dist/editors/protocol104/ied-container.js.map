{"version":3,"file":"ied-container.js","sourceRoot":"","sources":["../../../src/editors/protocol104/ied-container.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,aAAa,EACb,IAAI,EACJ,QAAQ,EACR,KAAK,GAEN,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AACpC,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAC;AAInC,OAAO,oBAAoB,CAAC;AAC5B,OAAO,kCAAkC,CAAC;AAE1C,OAAO,EACL,uBAAuB,EACvB,gBAAgB,GACjB,MAAM,qCAAqC,CAAC;AAE7C,OAAO,sCAAsC,CAAC;AAE9C,OAAO,EAAE,WAAW,EAAE,MAAM,4BAA4B,CAAC;AAEzD,OAAO,oBAAoB,CAAC;AAC5B,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AAEvD;;GAEG;AAEI,IAAM,eAAe,GAArB,MAAM,eAAgB,SAAQ,gBAAgB;IAQnD,IAAI,WAAW;QACb,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;aACpD,MAAM,CACL,UAAU,CAAC,EAAE,CACX,UAAU,CAAC,aAAa,CACtB,uBAAuB,oBAAoB,cAAc,CAC1D,KAAK,IAAI,CACb;aACA,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CACnB,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjE,CAAC;IACN,CAAC;IAES,YAAY;QACpB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAGD,IAAI,MAAM;QACR,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,MAAM,IAAI,GAAG,uBAAuB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEnD,OAAO,IAAI,CAAA,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAA,YAAY,IAAI,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;IACjE,CAAC;IAEO,aAAa;QACnB,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;QAC9B,OAAO,IAAI,CAAA,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YAClC,OAAO,IAAI,CAAA;;uBAEM,IAAI,CAAC,SAAS;kBACnB,IAAI,CAAC,GAAG;sBACJ,UAAU;;;OAGzB,CAAC;QACJ,CAAC,CAAC,EAAE,CAAC;IACP,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;6BACc,IAAI,CAAC,MAAM;;qCAEH,GAAG,CAAC,iCAAiC,CAAC;;;;;;qBAMtD,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE;;;;UAIrC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA,GAAG,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO;;KAEpE,CAAC;IACJ,CAAC;;AAEM,sBAAM,GAAG,GAAG,CAAA;;;;;GAKlB,CAAC;AArEF;IADC,QAAQ,EAAE;gDACO;AAGlB;IADC,KAAK,CAAC,eAAe,CAAC;qDACqB;AAG5C;IADC,QAAQ,EAAE;kDAYV;AAOD;IADC,QAAQ,EAAE;6CAMV;AA/BU,eAAe;IAD3B,aAAa,CAAC,mBAAmB,CAAC;GACtB,eAAe,CAwE3B;SAxEY,eAAe","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  property,\n  query,\n  TemplateResult,\n} from 'lit-element';\nimport { get } from 'lit-translate';\nimport { nothing } from 'lit-html';\n\nimport { IconButtonToggle } from '@material/mwc-icon-button-toggle';\n\nimport '@material/mwc-icon';\nimport '@material/mwc-icon-button-toggle';\n\nimport {\n  getDescriptionAttribute,\n  getNameAttribute,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport '@openscd/open-scd/src/action-pane.js';\n\nimport { getFullPath } from './foundation/foundation.js';\n\nimport './doi-container.js';\nimport { PROTOCOL_104_PRIVATE } from './foundation/private.js';\nimport { Base104Container } from './base-container.js';\n\n/**\n * Container showing all the DOI Elements, related to the 104 Protocol, of the passed IED Element in a container.\n */\n@customElement('ied-104-container')\nexport class Ied104Container extends Base104Container {\n  @property()\n  element!: Element;\n\n  @query('#toggleButton')\n  toggleButton!: IconButtonToggle | undefined;\n\n  @property()\n  get doiElements(): Element[] {\n    return Array.from(this.element.querySelectorAll(`DOI`))\n      .filter(\n        doiElement =>\n          doiElement.querySelector(\n            `DAI > Private[type=\"${PROTOCOL_104_PRIVATE}\"] > Address`\n          ) !== null\n      )\n      .sort((doi1, doi2) =>\n        getFullPath(doi1, 'IED').localeCompare(getFullPath(doi2, 'IED'))\n      );\n  }\n\n  protected firstUpdated(): void {\n    this.requestUpdate();\n  }\n\n  @property()\n  get header(): TemplateResult {\n    const name = getNameAttribute(this.element);\n    const desc = getDescriptionAttribute(this.element);\n\n    return html`${name}${desc ? html` &mdash; ${desc}` : nothing}`;\n  }\n\n  private renderDoiList(): TemplateResult {\n    const dois = this.doiElements;\n    return html`${dois.map(doiElement => {\n      return html`\n        <doi-104-container\n          .editCount=${this.editCount}\n          .doc=\"${this.doc}\"\n          .element=\"${doiElement}\"\n        >\n        </doi-104-container>\n      `;\n    })}`;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <action-pane .label=\"${this.header}\">\n        <mwc-icon slot=\"icon\">developer_board</mwc-icon>\n        <abbr slot=\"action\" title=\"${get('protocol104.toggleChildElements')}\">\n          <mwc-icon-button-toggle\n            id=\"toggleButton\"\n            on\n            onIcon=\"keyboard_arrow_up\"\n            offIcon=\"keyboard_arrow_down\"\n            @click=${() => this.requestUpdate()}\n          >\n          </mwc-icon-button-toggle>\n        </abbr>\n        ${this.toggleButton?.on ? html`${this.renderDoiList()}` : nothing}\n      </action-pane>\n    `;\n  }\n\n  static styles = css`\n    abbr {\n      text-decoration: none;\n      border-bottom: none;\n    }\n  `;\n}\n"]}