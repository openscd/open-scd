{"version":3,"file":"dotype-wizards.js","sourceRoot":"","sources":["../../../src/editors/templates/dotype-wizards.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit-html';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-button';\nimport '@material/mwc-list';\nimport '@material/mwc-list/mwc-list-item';\nimport '@material/mwc-select';\nimport { Select } from '@material/mwc-select';\nimport { SingleSelectedEvent } from '@material/mwc-list/mwc-list-foundation';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { List } from '@material/mwc-list';\n\nimport '@openscd/open-scd/src/wizard-textfield.js';\nimport {\n  find,\n  getValue,\n  identity,\n  isPublic,\n  newSubWizardEvent,\n  newWizardEvent,\n  Wizard,\n  WizardActor,\n  WizardInputElement,\n  WizardMenuActor,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport { cloneElement, createElement } from '@openscd/xml';\n\nimport {\n  Create,\n  EditorAction,\n  newActionEvent,\n  Replace,\n} from '@openscd/core/foundation/deprecated/editor.js';\nimport { createDaWizard, editDAWizard } from '../../wizards/da.js';\nimport { patterns } from '../../wizards/foundation/limits.js';\nimport {\n  addReferencedDataTypes,\n  allDataTypeSelector,\n  CreateOptions,\n  unifyCreateActionArray,\n  UpdateOptions,\n  WizardOptions,\n} from './foundation.js';\n\nfunction remove(element: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(\n      newActionEvent({ old: { parent: element.parentElement!, element } })\n    );\n    wizard.dispatchEvent(newWizardEvent());\n  };\n}\n\nfunction updateSDoAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const type = getValue(inputs.find(i => i.label === 'type')!)!;\n\n    const actions: EditorAction[] = [];\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc') &&\n      type === element.getAttribute('type')\n    ) {\n      return [];\n    }\n\n    const newElement = cloneElement(element, { name, desc, type });\n    actions.push({ old: { element }, new: { element: newElement } });\n\n    return actions;\n  };\n}\n\nfunction createSDoAction(parent: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const type = getValue(inputs.find(i => i.label === 'type')!);\n\n    const actions: EditorAction[] = [];\n\n    const element = createElement(parent.ownerDocument, 'SDO', {\n      name,\n      desc,\n      type,\n    });\n    actions.push({\n      new: {\n        parent,\n        element,\n      },\n    });\n\n    return actions;\n  };\n}\n\nfunction sDOWizard(options: WizardOptions): Wizard | undefined {\n  const doc = (<UpdateOptions>options).doc\n    ? (<UpdateOptions>options).doc\n    : (<CreateOptions>options).parent.ownerDocument;\n  const sdo = find(doc, 'SDO', (<UpdateOptions>options).identity ?? NaN);\n\n  const [title, action, type, menuActions, name, desc] = sdo\n    ? [\n        get('sdo.wizard.title.edit'),\n        updateSDoAction(sdo),\n        sdo.getAttribute('type'),\n        [{ icon: 'delete', label: get('remove'), action: remove(sdo) }],\n        sdo.getAttribute('name'),\n        sdo.getAttribute('desc'),\n      ]\n    : [\n        get('sdo.wizard.title.add'),\n        createSDoAction((<CreateOptions>options).parent),\n        null,\n        undefined,\n        '',\n        null,\n      ];\n\n  const types = Array.from(doc.querySelectorAll('DOType'))\n    .filter(isPublic)\n    .filter(type => type.getAttribute('id'));\n\n  return [\n    {\n      title,\n      element: sdo ?? undefined,\n      primary: { icon: '', label: get('save'), action },\n      menuActions,\n      content: [\n        html`<wizard-textfield\n          label=\"name\"\n          .maybeValue=${name}\n          helper=\"${get('scl.name')}\"\n          required\n          pattern=\"${patterns.tRestrName1stL}\"\n          dialogInitialFocus\n        >\n          ></wizard-textfield\n        >`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${desc}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-select\n          fixedMenuPosition\n          label=\"type\"\n          required\n          helper=\"${get('scl.type')}\"\n          >${types.map(\n            dataType =>\n              html`<mwc-list-item\n                value=${dataType.id}\n                ?selected=${dataType.id === type}\n                >${dataType.id}</mwc-list-item\n              >`\n          )}</mwc-select\n        >`,\n      ],\n    },\n  ];\n}\n\nfunction addPredefinedDOType(\n  parent: Element,\n  templates: XMLDocument\n): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!);\n\n    if (!id) return [];\n\n    const existId = Array.from(\n      templates.querySelectorAll(allDataTypeSelector)\n    ).some(type => type.getAttribute('id') === id);\n\n    if (existId) return [];\n\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const cdc = getValue(inputs.find(i => i.label === 'cdc')!)!;\n\n    const values = <Select>inputs.find(i => i.label === 'values');\n    const selectedElement = values.selected\n      ? templates.querySelector(`DOType[id=\"${values.selected.value}\"]`)\n      : null;\n    const element = values.selected\n      ? <Element>selectedElement!.cloneNode(true)\n      : createElement(parent.ownerDocument, 'DOType', {});\n\n    element.setAttribute('id', id);\n    element.setAttribute('cdc', cdc);\n    if (desc) element.setAttribute('desc', desc);\n\n    const actions: Create[] = [];\n\n    if (selectedElement)\n      addReferencedDataTypes(selectedElement, parent).forEach(action =>\n        actions.push(action)\n      );\n\n    actions.push({\n      new: {\n        parent,\n        element,\n      },\n    });\n\n    return unifyCreateActionArray(actions);\n  };\n}\n\nfunction onSelectTemplateDOType(e: Event, templates: Document): void {\n  const cdcUI = <Select>(\n    (<Select>e.target).parentElement!.querySelector(\n      'wizard-textfield[label=\"cdc\"]'\n    )!\n  );\n\n  const doTypeId = (<Select>e.target).value;\n  const cdc =\n    templates.querySelector(`DOType[id=\"${doTypeId}\"]`)?.getAttribute('cdc') ??\n    null;\n\n  if (cdc) cdcUI.value = cdc;\n  cdcUI.disabled = true;\n}\n\nexport function createDOTypeWizard(\n  parent: Element,\n  templates: Document\n): Wizard {\n  return [\n    {\n      title: get('dotype.wizard.title.add'),\n      primary: {\n        icon: 'add',\n        label: get('add'),\n        action: addPredefinedDOType(parent, templates),\n      },\n      content: [\n        html`<mwc-select\n          fixedMenuPosition\n          outlined\n          icon=\"playlist_add_check\"\n          label=\"values\"\n          helper=\"${get('dotype.wizard.enums')}\"\n          @selected=${(e: Event) => onSelectTemplateDOType(e, templates)}\n        >\n          ${Array.from(templates.querySelectorAll('DOType')).map(\n            datype =>\n              html`<mwc-list-item\n                graphic=\"icon\"\n                hasMeta\n                value=\"${datype.getAttribute('id') ?? ''}\"\n                ><span\n                  >${datype.getAttribute('id')?.replace('OpenSCD_', '')}</span\n                >\n                <span slot=\"meta\"\n                  >${datype.querySelectorAll('SDO,DA').length}</span\n                >\n              </mwc-list-item>`\n          )}\n        </mwc-select>`,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${get('scl.id')}\"\n          .maybeValue=${''}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${null}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"cdc\"\n          helper=\"${get('scl.CDC')}\"\n          required\n          pattern=\"${patterns.cdc}\"\n        ></wizard-textfield>`,\n      ],\n    },\n  ];\n}\n\nfunction openAddSdo(parent: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(newSubWizardEvent(() => sDOWizard({ parent })!));\n  };\n}\n\nfunction openAddDa(parent: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(newSubWizardEvent(() => createDaWizard(parent)!));\n  };\n}\n\nfunction updateDOTypeAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const cdc = getValue(inputs.find(i => i.label === 'CDC')!)!;\n\n    if (\n      id === element.getAttribute('id') &&\n      desc === element.getAttribute('desc') &&\n      cdc == element.getAttribute('cdc')\n    )\n      return [];\n\n    const newElement = cloneElement(element, { id, desc, cdc });\n\n    const actions: Replace[] = [];\n    actions.push({ old: { element }, new: { element: newElement } });\n\n    const oldId = element.getAttribute('id')!;\n    Array.from(\n      element.ownerDocument.querySelectorAll(\n        `LNodeType > DO[type=\"${oldId}\"], DOType > SDO[type=\"${oldId}\"]`\n      )\n    ).forEach(oldDo => {\n      const newDo = <Element>oldDo.cloneNode(false);\n      newDo.setAttribute('type', id);\n\n      actions.push({ old: { element: oldDo }, new: { element: newDo } });\n    });\n\n    return [\n      { title: get('dotype.action.edit', { oldId, newId: id }), actions },\n    ];\n  };\n}\n\nexport function dOTypeWizard(\n  dOTypeIdentity: string,\n  doc: XMLDocument\n): Wizard | undefined {\n  const dotype = find(doc, 'DOType', dOTypeIdentity);\n  if (!dotype) return undefined;\n\n  return [\n    {\n      title: get('dotype.wizard.title.edit'),\n      element: dotype,\n      primary: {\n        icon: '',\n        label: get('save'),\n        action: updateDOTypeAction(dotype),\n      },\n      menuActions: [\n        {\n          label: get('remove'),\n          icon: 'delete',\n          action: remove(dotype),\n        },\n        {\n          label: get('scl.DO'),\n          icon: 'playlist_add',\n          action: openAddSdo(dotype),\n        },\n        {\n          label: get('scl.DA'),\n          icon: 'playlist_add',\n          action: openAddDa(dotype),\n        },\n      ],\n      content: [\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${get('scl.id')}\"\n          .maybeValue=${dotype.getAttribute('id')}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${get('scl.desc')}\"\n          .maybeValue=${dotype.getAttribute('desc')}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"CDC\"\n          helper=\"${get('scl.CDC')}\"\n          .maybeValue=${dotype.getAttribute('cdc')}\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`\n          <mwc-list\n            style=\"margin-top: 0px;\"\n            @selected=${(e: SingleSelectedEvent) => {\n              const item = <ListItem>(<List>e.target).selected;\n\n              const daIdentity = (<ListItem>(<List>e.target).selected).value;\n              const da = find(doc, 'DA', daIdentity);\n\n              const wizard = item.classList.contains('DA')\n                ? da\n                  ? editDAWizard(da)\n                  : undefined\n                : sDOWizard({\n                    identity: item.value,\n                    doc,\n                  });\n\n              if (wizard) e.target!.dispatchEvent(newSubWizardEvent(wizard));\n            }}\n          >\n            ${Array.from(dotype.querySelectorAll('SDO, DA')).map(\n              daorsdo =>\n                html`<mwc-list-item\n                  twoline\n                  tabindex=\"0\"\n                  class=\"${daorsdo.tagName === 'DA' ? 'DA' : 'SDO'}\"\n                  value=\"${identity(daorsdo)}\"\n                  ><span>${daorsdo.getAttribute('name')}</span\n                  ><span slot=\"secondary\"\n                    >${daorsdo.tagName === 'SDO' ||\n                    daorsdo.getAttribute('bType') === 'Enum' ||\n                    daorsdo.getAttribute('bType') === 'Struct'\n                      ? '#' + daorsdo.getAttribute('type')\n                      : daorsdo.getAttribute('bType')}</span\n                  ></mwc-list-item\n                >`\n            )}\n          </mwc-list>\n        `,\n      ],\n    },\n  ];\n}\n"]}