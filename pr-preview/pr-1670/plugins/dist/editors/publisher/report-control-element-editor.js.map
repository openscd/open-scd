{"version":3,"file":"report-control-element-editor.js","sourceRoot":"","sources":["../../../src/editors/publisher/report-control-element-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@openscd/open-scd/src/wizard-textfield.js';\nimport '@openscd/open-scd/src/wizard-checkbox.js';\n\nimport { identity } from '@openscd/open-scd/src/foundation.js';\nimport { maxLength, patterns } from '../../wizards/foundation/limits.js';\n\n@customElement('report-control-element-editor')\nexport class ReportControlElementEditor extends LitElement {\n  /** The document being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property({ attribute: false })\n  doc!: XMLDocument;\n  /** The element being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property({ attribute: false })\n  element!: Element;\n\n  private renderOptFieldsContent(): TemplateResult {\n    const [\n      seqNum,\n      timeStamp,\n      dataSet,\n      reasonCode,\n      dataRef,\n      entryID,\n      configRef,\n      bufOvfl,\n    ] = [\n      'seqNum',\n      'timeStamp',\n      'dataSet',\n      'reasonCode',\n      'dataRef',\n      'entryID',\n      'configRef',\n      'bufOvfl',\n    ].map(\n      attr =>\n        this.element.querySelector('OptFields')?.getAttribute(attr) ?? null\n    );\n\n    return html`<h3>Optional Fields</h3>\n      ${Object.entries({\n        seqNum,\n        timeStamp,\n        dataSet,\n        reasonCode,\n        dataRef,\n        entryID,\n        configRef,\n        bufOvfl,\n      }).map(\n        ([key, value]) =>\n          html`<wizard-checkbox\n            label=\"${key}\"\n            .maybeValue=${value}\n            nullable\n            helper=\"${get(`scl.${key}`)}\"\n            disabled\n          ></wizard-checkbox>`\n      )}`;\n  }\n\n  private renderTrgOpsContent(): TemplateResult {\n    const [dchg, qchg, dupd, period, gi] = [\n      'dchg',\n      'qchg',\n      'dupd',\n      'period',\n      'gi',\n    ].map(\n      attr => this.element.querySelector('TrgOps')?.getAttribute(attr) ?? null\n    );\n\n    return html` <h3>Trigger Options</h3>\n      ${Object.entries({ dchg, qchg, dupd, period, gi }).map(\n        ([key, value]) =>\n          html`<wizard-checkbox\n            label=\"${key}\"\n            .maybeValue=${value}\n            nullable\n            helper=\"${get(`scl.${key}`)}\"\n            disabled\n          ></wizard-checkbox>`\n      )}`;\n  }\n\n  private renderChildElements(): TemplateResult {\n    return html`<div class=\"content\">\n      ${this.renderTrgOpsContent()}${this.renderOptFieldsContent()}\n    </div>`;\n  }\n\n  private renderReportControlContent(): TemplateResult {\n    const [name, desc, buffered, rptID, indexed, bufTime, intgPd] = [\n      'name',\n      'desc',\n      'buffered',\n      'rptID',\n      'indexed',\n      'bufTime',\n      'intgPd',\n    ].map(attr => this.element?.getAttribute(attr));\n    const max =\n      this.element.querySelector('RptEnabled')?.getAttribute('max') ?? null;\n\n    return html`<div class=\"content\">\n      <wizard-textfield\n        label=\"name\"\n        .maybeValue=${name}\n        helper=\"${get('scl.name')}\"\n        required\n        validationMessage=\"${get('textfield.required')}\"\n        pattern=\"${patterns.asciName}\"\n        maxLength=\"${maxLength.cbName}\"\n        dialogInitialFocus\n        disabled\n      ></wizard-textfield\n      ><wizard-textfield\n        label=\"desc\"\n        .maybeValue=${desc}\n        nullable\n        helper=\"${get('scl.desc')}\"\n        disabled\n      ></wizard-textfield\n      ><wizard-checkbox\n        label=\"buffered\"\n        .maybeValue=${buffered}\n        helper=\"${get('scl.buffered')}\"\n        disabled\n      ></wizard-checkbox\n      ><wizard-textfield\n        label=\"rptID\"\n        .maybeValue=${rptID}\n        nullable\n        required\n        helper=\"${get('report.rptID')}\"\n        disabled\n      ></wizard-textfield\n      ><wizard-checkbox\n        label=\"indexed\"\n        .maybeValue=${indexed}\n        nullable\n        helper=\"${get('scl.indexed')}\"\n        disabled\n      ></wizard-checkbox\n      ><wizard-textfield\n        label=\"max Clients\"\n        .maybeValue=${max}\n        helper=\"${get('scl.maxReport')}\"\n        nullable\n        type=\"number\"\n        suffix=\"#\"\n        disabled\n      ></wizard-textfield\n      ><wizard-textfield\n        label=\"bufTime\"\n        .maybeValue=${bufTime}\n        helper=\"${get('scl.bufTime')}\"\n        nullable\n        required\n        type=\"number\"\n        min=\"0\"\n        suffix=\"ms\"\n        disabled\n      ></wizard-textfield\n      ><wizard-textfield\n        label=\"intgPd\"\n        .maybeValue=${intgPd}\n        helper=\"${get('scl.intgPd')}\"\n        nullable\n        required\n        type=\"number\"\n        min=\"0\"\n        suffix=\"ms\"\n        disabled\n      ></wizard-textfield>\n    </div>`;\n  }\n\n  render(): TemplateResult {\n    if (this.element)\n      return html`<h2 style=\"display: flex;\">\n          <div style=\"flex:auto\">\n            <div>ReportControl</div>\n            <div class=\"headersubtitle\">${identity(this.element)}</div>\n          </div>\n        </h2>\n        <div class=\"parentcontent\">\n          ${this.renderReportControlContent()}${this.renderChildElements()}\n        </div>`;\n\n    return html`<div class=\"content\">\n      <h2>${get('publisher.nodataset')}</h2>\n    </div>`;\n  }\n\n  static styles = css`\n    .parentcontent {\n      display: grid;\n      grid-gap: 12px;\n      box-sizing: border-box;\n      grid-template-columns: repeat(auto-fit, minmax(316px, auto));\n    }\n\n    .content {\n      border-left: thick solid var(--mdc-theme-on-primary);\n    }\n\n    .content > * {\n      display: block;\n      margin: 4px 8px 16px;\n    }\n\n    h2,\n    h3 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      margin: 4px 8px 16px;\n      padding-left: 0.3em;\n    }\n\n    .headersubtitle {\n      font-size: 16px;\n      font-weight: 200;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n\n    *[iconTrailing='search'] {\n      --mdc-shape-small: 28px;\n    }\n\n    @media (max-width: 950px) {\n      .content {\n        border-left: 0px solid var(--mdc-theme-on-primary);\n      }\n    }\n  `;\n}\n"]}