{"version":3,"file":"gsecontrol.js","sourceRoot":"","sources":["../../src/wizards/gsecontrol.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAkB,MAAM,aAAa,CAAC;AACnD,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAEpC,OAAO,sBAAsB,CAAC;AAC9B,OAAO,kCAAkC,CAAC;AAM1C,OAAO,wCAAwC,CAAC;AAChD,OAAO,0CAA0C,CAAC;AAClD,OAAO,wCAAwC,CAAC;AAChD,OAAO,2CAA2C,CAAC;AACnD,OAAO,EACL,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,QAAQ,EAER,iBAAiB,EACjB,cAAc,GAKf,MAAM,qCAAqC,CAAC;AAE7C,OAAO,EACL,YAAY,EACZ,aAAa,EACb,oBAAoB,GACrB,MAAM,cAAc,CAAC;AAEtB,OAAO,EAKL,cAAc,EACf,MAAM,+CAA+C,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,wBAAwB,CAAC;AAC7D,OAAO,EAAE,iBAAiB,EAAE,MAAM,cAAc,CAAC;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,UAAU,CAAC;AACzC,OAAO,EAAE,mBAAmB,EAAE,MAAM,uBAAuB,CAAC;AAC5D,OAAO,EAAE,mBAAmB,EAAE,SAAS,EAAE,MAAM,wBAAwB,CAAC;AAExE,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAC;AACpC,OAAO,EACL,cAAc,EACd,sBAAsB,EACtB,WAAW,EACX,gBAAgB,GACjB,MAAM,qBAAqB,CAAC;AAC7B,OAAO,EAAE,qBAAqB,EAAE,oBAAoB,EAAE,MAAM,cAAc,CAAC;AAW3E,MAAM,UAAU,MAAM,CAAC,OAAgB;IACrC,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC5C,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC;IAC7D,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC;IACpE,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC;IAChE,OAAO,OAAO;SACX,OAAO,CAAC,KAAK,CAAC;QACf,EAAE,aAAa,CACb,uCAAuC;QACrC,wBAAwB,OAAO,cAAc,MAAM,OAAO;QAC1D,eAAe,MAAM,cAAc,MAAM,IAAI,CAChD,CAAC;AACN,CAAC;AAED,MAAM,UAAU,uBAAuB,CACrC,OAAuB;IAEvB,OAAO;QACL,IAAI,CAAA;;oBAEY,OAAO,CAAC,IAAI;gBAChB,GAAG,CAAC,UAAU,CAAC;;2BAEJ,GAAG,CAAC,oBAAoB,CAAC;iBACnC,QAAQ,CAAC,QAAQ;mBACf,SAAS,CAAC,MAAM;;yBAEV;QACrB,IAAI,CAAA;;oBAEY,OAAO,CAAC,IAAI;;gBAEhB,GAAG,CAAC,UAAU,CAAC;yBACN;QACrB,IAAI,CAAA;;oBAEY,OAAO,CAAC,IAAI;gBAChB,GAAG,CAAC,UAAU,CAAC;;;SAGtB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,GAAG,CACtB,IAAI,CAAC,EAAE,CAAC,IAAI,CAAA,yBAAyB,IAAI,KAAK,IAAI,kBAAkB,CACrE;MACD;QACF,IAAI,CAAA;;oBAEY,OAAO,CAAC,KAAK;gBACjB,GAAG,CAAC,QAAQ,CAAC;;2BAEF,GAAG,CAAC,oBAAoB,CAAC;yBAC3B;QACrB,IAAI,CAAA;;oBAEY,OAAO,CAAC,SAAS;;gBAErB,GAAG,CAAC,eAAe,CAAC;wBACZ;QACpB,IAAI,CAAA;;oBAEY,OAAO,CAAC,eAAe;;;gBAG3B,GAAG,CAAC,oBAAoB,CAAC;SAChC,mBAAmB,CAAC,GAAG,CACxB,IAAI,CAAC,EAAE,CAAC,IAAI,CAAA,yBAAyB,IAAI,KAAK,IAAI,kBAAkB,CACrE;MACD;KACH,CAAC;AACJ,CAAC;AAED,SAAS,sBAAsB,CAAC,MAAe;IAC7C,OAAO,CAAC,MAA4B,EAAE,MAAe,EAAE,EAAE;QACvD,MAAM,OAAO,GAAmB,EAAE,CAAC;QAEnC,+BAA+B;QAC/B,MAAM,eAAe,GAAkC,EAAE,CAAC;QAC1D,MAAM,cAAc,GAAG;YACrB,MAAM;YACN,MAAM;YACN,MAAM;YACN,OAAO;YACP,WAAW;YACX,iBAAiB;SAClB,CAAC;QACF,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YAC3B,eAAe,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,GAAG,CAAE,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;QAEH,0EAA0E;QAC1E,eAAe,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC;QAEjC,MAAM,WAAW,GAAG,eAAe,CAAC,IAAI,GAAG,UAAU,CAAC;QACtD,eAAe,CAAC,QAAQ,CAAC,GAAG,WAAW,CAAC;QAExC,MAAM,UAAU,GAAG,aAAa,CAC9B,MAAM,CAAC,aAAa,EACpB,YAAY,EACZ,eAAe,CAChB,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;QAEvD,gDAAgD;QAChD,IAAI,sBAAsB,CAAC,MAAM,CAAC,EAAE;YAClC,qCAAqC;YACrC,MAAM,SAAS,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;YACzC,8BAA8B;YAC9B,MAAM,GAAG,GAAG,aAAa,CAAC,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE;gBACrD,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE;gBAC7D,MAAM,EAAE,eAAe,CAAC,MAAM,CAAE;aACjC,CAAC,CAAC;YACH,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,SAAU,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YAE5D,yBAAyB;YACzB,MAAM,QAAQ,GACD,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,WAAW,CAAE,EAAE,OAAO;gBAClE,KAAK,CAAC;YACR,MAAM,QAAQ,GAAkC,EAAE,CAAC;YACnD,MAAM,OAAO,GAAG,CAAC,aAAa,EAAE,OAAO,EAAE,SAAS,EAAE,eAAe,CAAC,CAAC;YACrE,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBACpB,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,GAAG,CAAE,CAAC,CAAC;YAC/D,CAAC,CAAC,CAAC;YACH,MAAM,OAAO,GAAG,oBAAoB,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;YAC9D,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;YAEzD,yBAAyB;YACzB,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,CAAE,CAAC,CAAC;YACnE,MAAM,cAAc,GAAG,aAAa,CAAC,MAAM,CAAC,aAAa,EAAE,SAAS,EAAE;gBACpE,IAAI,EAAE,GAAG;gBACT,UAAU,EAAE,GAAG;aAChB,CAAC,CAAC;YACH,cAAc,CAAC,WAAW,GAAG,OAAO,CAAC;YACrC,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,cAAc,EAAE,EAAE,CAAC,CAAC;YAEhE,yBAAyB;YACzB,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,CAAE,CAAC,CAAC;YACnE,MAAM,cAAc,GAAG,aAAa,CAAC,MAAM,CAAC,aAAa,EAAE,SAAS,EAAE;gBACpE,IAAI,EAAE,GAAG;gBACT,UAAU,EAAE,GAAG;aAChB,CAAC,CAAC;YACH,cAAc,CAAC,WAAW,GAAG,OAAO,CAAC;YACrC,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,cAAc,EAAE,EAAE,CAAC,CAAC;SACjE;QAED,4CAA4C;QAC5C,MAAM,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,aAAa,EAAE,SAAS,EAAE;YAC7D,IAAI,EAAE,WAAW;SAClB,CAAC,CAAC;QACH,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;QAEpD,MAAM,MAAM,GAAG,MAAM,CAAC,UAAW,CAAC,aAAa,CAAa,aAAa,CAAC,CAAC;QAC3E,MAAM,KAAK,GAAG,MAAM,EAAE,KAAK,IAAI,EAAE,CAAC;QAElC,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;YACxB,MAAM,OAAO,GAAG,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAEtC,IAAI,CAAC,OAAO;gBAAE,SAAS;YAEvB,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;SACrD;QAED,OAAO;YACL;gBACE,KAAK,EAAE,GAAG,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;gBACrD,OAAO;aACR;SACF,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,OAAgB;IACrD,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAEzC,MAAM,IAAI,GAAG,oBAAoB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;IACzD,MAAM,IAAI,GAAG,IAAI,CAAC;IAClB,MAAM,IAAI,GAAG,OAAO,CAAC;IACrB,MAAM,KAAK,GAAG,EAAE,CAAC;IACjB,MAAM,SAAS,GAAG,IAAI,CAAC;IACvB,MAAM,eAAe,GAAG,IAAI,CAAC;IAE7B,MAAM,WAAW,GAAG,IAAI,CAAC;IACzB,MAAM,UAAU,GAAkC;QAChD,aAAa,EAAE,gBAAgB,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC;QAC/D,KAAK,EAAE,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC;QACzC,SAAS,EAAE,IAAI;QACf,eAAe,EAAE,IAAI;KACtB,CAAC;IACF,MAAM,OAAO,GAAG,IAAI,CAAC;IACrB,MAAM,OAAO,GAAG,MAAM,CAAC;IAEvB,OAAO,sBAAsB,CAAC,OAAO,CAAC;QACpC,CAAC,CAAC;YACE;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC;gBACzD,OAAO,EAAE,uBAAuB,CAAC;oBAC/B,IAAI;oBACJ,IAAI;oBACJ,IAAI;oBACJ,KAAK;oBACL,SAAS;oBACT,eAAe;iBAChB,CAAC;aACH;YACD;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;gBAClD,OAAO,EAAE;oBACP,GAAG,qBAAqB,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;oBACrD,IAAI,CAAA;;4BAEY,OAAO;;;;iCAIF;oBACrB,IAAI,CAAA;;4BAEY,OAAO;;;;iCAIF;iBACtB;aACF;YACD;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,CAAC;gBAC9B,OAAO,EAAE;oBACP,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC;oBAClB,MAAM,EAAE,sBAAsB,CAAC,OAAO,CAAC;iBACxC;gBACD,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA,EAAE,CAAC;aACzD;SACF;QACH,CAAC,CAAC;YACE;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC;gBACzD,OAAO,EAAE,uBAAuB,CAAC;oBAC/B,IAAI;oBACJ,IAAI;oBACJ,IAAI;oBACJ,KAAK;oBACL,SAAS;oBACT,eAAe;iBAChB,CAAC;aACH;YACD;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;gBAClD,OAAO,EAAE;oBACP,IAAI,CAAA;;;;;gBAKA,GAAG,CAAC,iBAAiB,CAAC;kBACpB;iBACP;aACF;YACD;gBACE,KAAK,EAAE,GAAG,CAAC,kBAAkB,CAAC;gBAC9B,OAAO,EAAE;oBACP,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC;oBAClB,MAAM,EAAE,sBAAsB,CAAC,OAAO,CAAC;iBACxC;gBACD,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA,EAAE,CAAC;aACzD;SACF,CAAC;AACR,CAAC;AAED,SAAS,0BAA0B,CAAC,GAAgB;IAClD,OAAO,CAAC,CAAuB,EAAE,MAAe,EAAE,EAAE;QAClD,MAAM,MAAM,GAAG,MAAM,CAAC,UAAU,EAAE,aAAa,CAAa,aAAa,CAAC,CAAC;QAC3E,MAAM,IAAI,GAAG,MAAM,EAAE,IAAI,IAAI,EAAE,CAAC;QAEhC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,EAAE,CAAC;QAEjC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,EAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,OAAO,KAAK,KAAK;YAAE,OAAO,EAAE,CAAC;QAEjC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG;YAAE,OAAO,EAAE,CAAC;QAEpB,MAAM,GAAG,GAAG,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,GAAG;YAAE,OAAO,EAAE,CAAC;QAEpB,OAAO,CAAC,GAAG,EAAE,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,wBAAwB,CAAC,GAAgB;IACvD,OAAO;QACL;YACE,KAAK,EAAE,GAAG,CAAC,4BAA4B,CAAC;YACxC,OAAO,EAAE;gBACP,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC;gBAClB,MAAM,EAAE,0BAA0B,CAAC,GAAG,CAAC;aACxC;YACD,OAAO,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC1B;KACF,CAAC;AACJ,CAAC;AAED,SAAS,6BAA6B,CAAC,SAAkB;IACvD,OAAO,GAAG,EAAE;QACV,IAAI,SAAS,CAAC,OAAO,KAAK,KAAK,IAAI,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC;YAC/D,OAAO,CAAC,GAAG,EAAE,CAAC,sBAAsB,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAE,CAAC,CAAC,CAAC;QAEzE,OAAO,CAAC,GAAG,EAAE,CAAC,wBAAwB,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;IACnE,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,OAAgB;IACrD,IAAI,CAAC,OAAO,CAAC,aAAa;QAAE,OAAO,IAAI,CAAC;IAExC,MAAM,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,aAAa,CACjD,iBAAiB,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CACpD,CAAC;IACF,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IAE5B,MAAM,SAAS,GACb,KAAK,CAAC,IAAI,CACR,OAAO,CAAC,aAAa,EAAE,gBAAgB,CACrC,gDAAgD,CACjD,IAAI,EAAE,CACR,CAAC,MAAM,CACN,YAAY,CAAC,EAAE,CACb,YAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,OAAO,EAAE,YAAY,CAAC,MAAM,CAAC,CACxE,CAAC,MAAM,IAAI,CAAC,CAAC;IAEhB,MAAM,OAAO,GAAa,EAAE,CAAC;IAE7B,OAAO,CAAC,IAAI,CAAC;QACX,GAAG,EAAE;YACH,MAAM,EAAE,OAAO,CAAC,aAAa;YAC7B,OAAO;YACP,SAAS,EAAE,OAAO,CAAC,WAAW;SAC/B;KACF,CAAC,CAAC;IAEH,IAAI,OAAO,IAAI,SAAS;QACtB,OAAO,CAAC,IAAI,CAAC;YACX,GAAG,EAAE;gBACH,MAAM,EAAE,OAAO,CAAC,aAAa;gBAC7B,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,OAAO,CAAC,WAAW;aAC/B;SACF,CAAC,CAAC;IAEL,IAAI,GAAG;QACL,OAAO,CAAC,IAAI,CAAC;YACX,GAAG,EAAE;gBACH,MAAM,EAAE,GAAG,CAAC,aAAc;gBAC1B,OAAO,EAAE,GAAG;gBACZ,SAAS,EAAE,GAAG,CAAC,WAAW;aAC3B;SACF,CAAC,CAAC;IAEL,MAAM,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAE,CAAC;IAC3C,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IAEnE,OAAO;QACL,KAAK,EAAE,GAAG,CAAC,4BAA4B,EAAE;YACvC,IAAI,EAAE,OAAO,CAAC,OAAO;YACrB,IAAI;YACJ,OAAO;SACR,CAAC;QACF,OAAO;KACR,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAgB;IAC/C,OAAO,CAAC,MAAe,EAAQ,EAAE;QAC/B,MAAM,aAAa,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;QACtD,IAAI,aAAa;YAAE,MAAM,CAAC,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC,CAAC;IACzC,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,iBAAiB,CAAC,OAAgB;IACzC,OAAO,CAAC,MAAe,EAAQ,EAAE;QAC/B,MAAM,CAAC,aAAa,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC5E,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,aAAa,CAAC,OAAgB;IACrC,OAAO,CAAC,MAAe,EAAQ,EAAE;QAC/B,MAAM,CAAC,aAAa,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACxE,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,OAAgB;IACrD,OAAO,CAAC,MAA4B,EAAkB,EAAE;QACtD,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC,KAAM,CAAC;QAC1D,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC,CAAC;QAC7D,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC,CAAC;QAC7D,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,OAAO,CAAE,CAAE,CAAC;QAChE,MAAM,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,WAAW,CAAE,CAAC,CAAC;QACvE,MAAM,eAAe,GAAG,QAAQ,CAC9B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,iBAAiB,CAAE,CACjD,CAAC;QAEF,IACE,IAAI,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;YACrC,IAAI,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;YACrC,IAAI,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;YACrC,KAAK,KAAK,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC;YACvC,SAAS,KAAK,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC;YAC/C,eAAe,KAAK,OAAO,CAAC,YAAY,CAAC,iBAAiB,CAAC;YAE3D,OAAO,EAAE,CAAC;QAEZ,MAAM,UAAU,GAAG,YAAY,CAAC,OAAO,EAAE;YACvC,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,KAAK;YACL,SAAS;YACT,eAAe;SAChB,CAAC,CAAC;QAEH,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,GAAG,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;IAC9D,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,oBAAoB,CAAC,OAAgB;IACnD,MAAM,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC1C,MAAM,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC1C,MAAM,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC1C,MAAM,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC5C,MAAM,SAAS,GAAG,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;IACpD,MAAM,eAAe,GAAG,OAAO,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;IAEhE,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IAE5B,MAAM,OAAO,GAAG,OAAO,CAAC,aAAa,EAAE,aAAa,CAClD,iBAAiB,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CACpD,CAAC;IAEF,MAAM,WAAW,GAAiB,EAAE,CAAC;IACrC,WAAW,CAAC,IAAI,CAAC;QACf,IAAI,EAAE,QAAQ;QACd,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC;QACpB,MAAM,EAAE,gBAAgB,CAAC,OAAO,CAAC;KAClC,CAAC,CAAC;IAEH,IAAI,OAAO;QACT,WAAW,CAAC,IAAI,CAAC;YACf,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,GAAG,CAAC,aAAa,CAAC;YACzB,MAAM,EAAE,iBAAiB,CAAC,OAAO,CAAC;SACnC,CAAC,CAAC;IAEL,IAAI,GAAG;QACL,WAAW,CAAC,IAAI,CAAC;YACf,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,GAAG,CAAC,mBAAmB,CAAC;YAC/B,MAAM,EAAE,aAAa,CAAC,GAAG,CAAC;SAC3B,CAAC,CAAC;IAEL,OAAO;QACL;YACE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,EAAE,OAAO,EAAE,OAAO,CAAC,OAAO,EAAE,CAAC;YAC7D,OAAO;YACP,OAAO,EAAE;gBACP,IAAI,EAAE,MAAM;gBACZ,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC;gBAClB,MAAM,EAAE,sBAAsB,CAAC,OAAO,CAAC;aACxC;YACD,WAAW;YACX,OAAO,EAAE;gBACP,GAAG,uBAAuB,CAAC;oBACzB,IAAI;oBACJ,IAAI;oBACJ,IAAI;oBACJ,KAAK;oBACL,SAAS;oBACT,eAAe;iBAChB,CAAC;aACH;SACF;KACF,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,OAAgB;IACrD,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,CAC3E,QAAQ,CACT,CAAC;IAEF,MAAM,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC;QAC1C,CAAC,CAAC;YACE,IAAI,EAAE,KAAK;YACX,KAAK,EAAE,GAAG,CAAC,OAAO,CAAC;YACnB,MAAM,EAAE,6BAA6B,CAAC,OAAO,CAAC;SAC/C;QACH,CAAC,CAAC,SAAS,CAAC;IAEd,OAAO;QACL;YACE,KAAK,EAAE,GAAG,CAAC,qBAAqB,EAAE,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC;YAC5D,OAAO;YACP,OAAO,EAAE;gBACP,IAAI,CAAA;sBACU,CAAC,CAAsB,EAAE,EAAE;oBACrC,MAAM,mBAAmB,GAAqB,CAAC,CAAC,MAAO,CAAC,QAAS;yBAC9D,KAAK,CAAC;oBACT,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,EAAE,YAAY,EAAE,mBAAmB,CAAC,CAAC;oBACpE,IAAI,UAAU,EAAE;wBACd,CAAC,CAAC,MAAO,CAAC,aAAa,CACrB,iBAAiB,CAAC,GAAG,EAAE,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAC1D,CAAC;qBACH;gBACH,CAAC;aACE,WAAW,CAAC,GAAG,CAChB,UAAU,CAAC,EAAE,CACX,IAAI,CAAA,iCAAiC,QAAQ,CAAC,UAAU,CAAC;yBAC9C,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC;;qBAEnC,QAAQ,CAAC,UAAU,CAAC;;gBAEzB,CACL;UACD;aACH;SACF;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { html, TemplateResult } from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-button';\nimport '@material/mwc-list/mwc-list-item';\nimport { Checkbox } from '@material/mwc-checkbox';\nimport { List } from '@material/mwc-list';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { SingleSelectedEvent } from '@material/mwc-list/mwc-list-foundation';\n\nimport '@openscd/open-scd/src/filtered-list.js';\nimport '@openscd/open-scd/src/wizard-checkbox.js';\nimport '@openscd/open-scd/src/wizard-select.js';\nimport '@openscd/open-scd/src/wizard-textfield.js';\nimport {\n  find,\n  getValue,\n  identity,\n  isPublic,\n  MenuAction,\n  newSubWizardEvent,\n  newWizardEvent,\n  Wizard,\n  WizardActor,\n  WizardInputElement,\n  WizardMenuActor,\n} from '@openscd/open-scd/src/foundation.js';\n\nimport {\n  cloneElement,\n  createElement,\n  getUniqueElementName,\n} from '@openscd/xml';\n\nimport { \n  ComplexAction,\n  Delete,\n  SimpleAction,\n  EditorAction,\n  newActionEvent\n} from '@openscd/core/foundation/deprecated/editor.js';\nimport { maxLength, patterns } from './foundation/limits.js';\nimport { editDataSetWizard } from './dataset.js';\nimport { editGseWizard } from './gse.js';\nimport { securityEnabledEnum } from './foundation/enums.js';\nimport { dataAttributePicker, iEDPicker } from './foundation/finder.js';\nimport { FinderList } from '@openscd/open-scd/src/finder-list.js';\nimport { newFCDA } from './fcda.js';\nimport {\n  getConnectedAP,\n  isAccessPointConnected,\n  uniqueAppId,\n  uniqueMacAddress,\n} from './foundation/scl.js';\nimport { contentGseOrSmvWizard, createAddressElement } from './address.js';\n\ninterface ContentOptions {\n  name: string | null;\n  desc: string | null;\n  type: string | null;\n  appID: string | null;\n  fixedOffs: string | null;\n  securityEnabled: string | null;\n}\n\nexport function getGSE(element: Element): Element | null | undefined {\n  const cbName = element.getAttribute('name');\n  const iedName = element.closest('IED')?.getAttribute('name');\n  const apName = element.closest('AccessPoint')?.getAttribute('name');\n  const ldInst = element.closest('LDevice')?.getAttribute('inst');\n  return element\n    .closest('SCL')\n    ?.querySelector(\n      `:root > Communication > SubNetwork > ` +\n        `ConnectedAP[iedName=\"${iedName}\"][apName=\"${apName}\"] > ` +\n        `GSE[ldInst=\"${ldInst}\"][cbName=\"${cbName}\"]`\n    );\n}\n\nexport function contentGseControlWizard(\n  content: ContentOptions\n): TemplateResult[] {\n  return [\n    html`<wizard-textfield\n      label=\"name\"\n      .maybeValue=${content.name}\n      helper=\"${get('scl.name')}\"\n      required\n      validationMessage=\"${get('textfield.required')}\"\n      pattern=\"${patterns.asciName}\"\n      maxLength=\"${maxLength.cbName}\"\n      dialogInitialFocus\n    ></wizard-textfield>`,\n    html`<wizard-textfield\n      label=\"desc\"\n      .maybeValue=${content.desc}\n      nullable\n      helper=\"${get('scl.desc')}\"\n    ></wizard-textfield>`,\n    html`<wizard-select\n      label=\"type\"\n      .maybeValue=${content.type}\n      helper=\"${get('scl.type')}\"\n      nullable\n      required\n      >${['GOOSE', 'GSSE'].map(\n        type => html`<mwc-list-item value=\"${type}\">${type}</mwc-list-item>`\n      )}</wizard-select\n    >`,\n    html`<wizard-textfield\n      label=\"appID\"\n      .maybeValue=${content.appID}\n      helper=\"${get('scl.id')}\"\n      required\n      validationMessage=\"${get('textfield.nonempty')}\"\n    ></wizard-textfield>`,\n    html`<wizard-checkbox\n      label=\"fixedOffs\"\n      .maybeValue=${content.fixedOffs}\n      nullable\n      helper=\"${get('scl.fixedOffs')}\"\n    ></wizard-checkbox>`,\n    html`<wizard-select\n      label=\"securityEnabled\"\n      .maybeValue=${content.securityEnabled}\n      nullable\n      required\n      helper=\"${get('scl.securityEnable')}\"\n      >${securityEnabledEnum.map(\n        type => html`<mwc-list-item value=\"${type}\">${type}</mwc-list-item>`\n      )}</wizard-select\n    >`,\n  ];\n}\n\nfunction createGseControlAction(parent: Element): WizardActor {\n  return (inputs: WizardInputElement[], wizard: Element) => {\n    const actions: SimpleAction[] = [];\n\n    // Create ReportControl element\n    const gseControlAttrs: Record<string, string | null> = {};\n    const gseControlKeys = [\n      'name',\n      'desc',\n      'type',\n      'appID',\n      'fixedOffs',\n      'securityEnabled',\n    ];\n    gseControlKeys.forEach(key => {\n      gseControlAttrs[key] = getValue(inputs.find(i => i.label === key)!);\n    });\n\n    // confRef is handled automatically and is 1 for new referenced GseControl\n    gseControlAttrs['confRev'] = '1';\n\n    const dataSetName = gseControlAttrs.name + 'sDataSet';\n    gseControlAttrs['datSet'] = dataSetName;\n\n    const gseControl = createElement(\n      parent.ownerDocument,\n      'GSEControl',\n      gseControlAttrs\n    );\n    actions.push({ new: { parent, element: gseControl } });\n\n    // Create GSE element with connected AccessPoint\n    if (isAccessPointConnected(parent)) {\n      // Get `GSE`'s ``ConnectedAP`` parent\n      const gseParent = getConnectedAP(parent);\n      // Create the new GSE Element.\n      const gse = createElement(parent.ownerDocument, 'GSE', {\n        ldInst: parent.closest('LDevice')?.getAttribute('inst') ?? '',\n        cbName: gseControlAttrs['name']!,\n      });\n      actions.push({ new: { parent: gseParent!, element: gse } });\n\n      // Create Address Element\n      const instType: boolean =\n        (<Checkbox>wizard.shadowRoot?.querySelector('#instType'))?.checked ??\n        false;\n      const gseAttrs: Record<string, string | null> = {};\n      const gseKeys = ['MAC-Address', 'APPID', 'VLAN-ID', 'VLAN-PRIORITY'];\n      gseKeys.forEach(key => {\n        gseAttrs[key] = getValue(inputs.find(i => i.label === key)!);\n      });\n      const address = createAddressElement(gseAttrs, gse, instType);\n      actions.push({ new: { parent: gse, element: address } });\n\n      // Create MinTime Element\n      const minTime = getValue(inputs.find(i => i.label === 'MinTime')!);\n      const minTimeElement = createElement(parent.ownerDocument, 'MinTime', {\n        unit: 's',\n        multiplier: 'm',\n      });\n      minTimeElement.textContent = minTime;\n      actions.push({ new: { parent: gse, element: minTimeElement } });\n\n      // Create MaxTime Element\n      const maxTime = getValue(inputs.find(i => i.label === 'MaxTime')!);\n      const maxTimeElement = createElement(parent.ownerDocument, 'MaxTime', {\n        unit: 's',\n        multiplier: 'm',\n      });\n      maxTimeElement.textContent = maxTime;\n      actions.push({ new: { parent: gse, element: maxTimeElement } });\n    }\n\n    //add empty dataset that can be filled later\n    const dataSet = createElement(parent.ownerDocument, 'DataSet', {\n      name: dataSetName,\n    });\n    actions.push({ new: { parent, element: dataSet } });\n\n    const finder = wizard.shadowRoot!.querySelector<FinderList>('finder-list');\n    const paths = finder?.paths ?? [];\n\n    for (const path of paths) {\n      const element = newFCDA(parent, path);\n\n      if (!element) continue;\n\n      actions.push({ new: { parent: dataSet, element } });\n    }\n\n    return [\n      {\n        title: get('editing.created', { name: 'GSEControl' }),\n        actions,\n      },\n    ];\n  };\n}\n\nexport function createGseControlWizard(ln0OrLn: Element): Wizard {\n  const server = ln0OrLn.closest('Server');\n\n  const name = getUniqueElementName(ln0OrLn, 'GSEControl');\n  const desc = null;\n  const type = 'GOOSE';\n  const appID = '';\n  const fixedOffs = null;\n  const securityEnabled = null;\n\n  const hasInstType = true;\n  const attributes: Record<string, string | null> = {\n    'MAC-Address': uniqueMacAddress(ln0OrLn.ownerDocument, 'GOOSE'),\n    APPID: uniqueAppId(ln0OrLn.ownerDocument),\n    'VLAN-ID': null,\n    'VLAN-PRIORITY': null,\n  };\n  const minTime = '10';\n  const maxTime = '1000';\n\n  return isAccessPointConnected(ln0OrLn)\n    ? [\n        {\n          title: get('wizard.title.add', { tagName: 'GSEControl' }),\n          content: contentGseControlWizard({\n            name,\n            desc,\n            type,\n            appID,\n            fixedOffs,\n            securityEnabled,\n          }),\n        },\n        {\n          title: get('wizard.title.add', { tagName: 'GSE' }),\n          content: [\n            ...contentGseOrSmvWizard({ hasInstType, attributes }),\n            html`<wizard-textfield\n              label=\"MinTime\"\n              .maybeValue=${minTime}\n              nullable\n              suffix=\"ms\"\n              type=\"number\"\n            ></wizard-textfield>`,\n            html`<wizard-textfield\n              label=\"MaxTime\"\n              .maybeValue=${maxTime}\n              nullable\n              suffix=\"ms\"\n              type=\"number\"\n            ></wizard-textfield>`,\n          ],\n        },\n        {\n          title: get('dataset.fcda.add'),\n          primary: {\n            icon: 'save',\n            label: get('save'),\n            action: createGseControlAction(ln0OrLn),\n          },\n          content: [server ? dataAttributePicker(server) : html``],\n        },\n      ]\n    : [\n        {\n          title: get('wizard.title.add', { tagName: 'GSEControl' }),\n          content: contentGseControlWizard({\n            name,\n            desc,\n            type,\n            appID,\n            fixedOffs,\n            securityEnabled,\n          }),\n        },\n        {\n          title: get('wizard.title.add', { tagName: 'GSE' }),\n          content: [\n            html`<h3\n              style=\"color: var(--mdc-theme-on-surface);\n                      font-family: 'Roboto', sans-serif;\n                      font-weight: 300;\"\n            >\n              ${get('gse.missingaccp')}\n            </h3>`,\n          ],\n        },\n        {\n          title: get('dataset.fcda.add'),\n          primary: {\n            icon: 'save',\n            label: get('save'),\n            action: createGseControlAction(ln0OrLn),\n          },\n          content: [server ? dataAttributePicker(server) : html``],\n        },\n      ];\n}\n\nfunction openGseControlCreateWizard(doc: XMLDocument): WizardActor {\n  return (_: WizardInputElement[], wizard: Element) => {\n    const finder = wizard.shadowRoot?.querySelector<FinderList>('finder-list');\n    const path = finder?.path ?? [];\n\n    if (path.length === 0) return [];\n\n    const [tagName, id] = path.pop()!.split(': ');\n    if (tagName !== 'IED') return [];\n\n    const ied = find(doc, tagName, id);\n    if (!ied) return [];\n\n    const ln0 = ied.querySelector('LN0');\n    if (!ln0) return [];\n\n    return [() => createGseControlWizard(ln0)];\n  };\n}\n\nexport function gseControlParentSelector(doc: XMLDocument): Wizard {\n  return [\n    {\n      title: get('gsecontrol.wizard.location'),\n      primary: {\n        icon: '',\n        label: get('next'),\n        action: openGseControlCreateWizard(doc),\n      },\n      content: [iEDPicker(doc)],\n    },\n  ];\n}\n\nfunction prepareGseControlCreateWizard(anyParent: Element): WizardActor {\n  return () => {\n    if (anyParent.tagName === 'IED' && anyParent.querySelector('LN0'))\n      return [() => createGseControlWizard(anyParent.querySelector('LN0')!)];\n\n    return [() => gseControlParentSelector(anyParent.ownerDocument)];\n  };\n}\n\nexport function removeGseControlAction(element: Element): ComplexAction | null {\n  if (!element.parentElement) return null;\n\n  const dataSet = element.parentElement.querySelector(\n    `DataSet[name=\"${element.getAttribute('datSet')}\"]`\n  );\n  const gSE = getGSE(element);\n\n  const singleUse =\n    Array.from(\n      element.parentElement?.querySelectorAll<Element>(\n        'ReportControl, GSEControl, SampledValueControl'\n      ) ?? []\n    ).filter(\n      controlblock =>\n        controlblock.getAttribute('datSet') === dataSet?.getAttribute('name')\n    ).length <= 1;\n\n  const actions: Delete[] = [];\n\n  actions.push({\n    old: {\n      parent: element.parentElement,\n      element,\n      reference: element.nextSibling,\n    },\n  });\n\n  if (dataSet && singleUse)\n    actions.push({\n      old: {\n        parent: element.parentElement,\n        element: dataSet,\n        reference: dataSet.nextSibling,\n      },\n    });\n\n  if (gSE)\n    actions.push({\n      old: {\n        parent: gSE.parentElement!,\n        element: gSE,\n        reference: gSE.nextSibling,\n      },\n    });\n\n  const name = element.getAttribute('name')!;\n  const iedName = element.closest('IED')?.getAttribute('name') ?? '';\n\n  return {\n    title: get('controlblock.action.remove', {\n      type: element.tagName,\n      name,\n      iedName,\n    }),\n    actions,\n  };\n}\n\nexport function removeGseControl(element: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    const complexAction = removeGseControlAction(element);\n    if (complexAction) wizard.dispatchEvent(newActionEvent(complexAction));\n    wizard.dispatchEvent(newWizardEvent());\n  };\n}\n\nfunction openDataSetWizard(element: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(newSubWizardEvent(() => editDataSetWizard(element)));\n  };\n}\n\nfunction openGseWizard(element: Element): WizardMenuActor {\n  return (wizard: Element): void => {\n    wizard.dispatchEvent(newSubWizardEvent(() => editGseWizard(element)));\n  };\n}\n\nexport function updateGseControlAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditorAction[] => {\n    const name = inputs.find(i => i.label === 'name')!.value!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const type = getValue(inputs.find(i => i.label === 'type')!);\n    const appID = getValue(inputs.find(i => i.label === 'appID')!)!;\n    const fixedOffs = getValue(inputs.find(i => i.label === 'fixedOffs')!);\n    const securityEnabled = getValue(\n      inputs.find(i => i.label === 'securityEnabled')!\n    );\n\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc') &&\n      type === element.getAttribute('type') &&\n      appID === element.getAttribute('appID') &&\n      fixedOffs === element.getAttribute('fixedOffs') &&\n      securityEnabled === element.getAttribute('securityEnabled')\n    )\n      return [];\n\n    const newElement = cloneElement(element, {\n      name,\n      desc,\n      type,\n      appID,\n      fixedOffs,\n      securityEnabled,\n    });\n\n    return [{ old: { element }, new: { element: newElement } }];\n  };\n}\n\nexport function editGseControlWizard(element: Element): Wizard {\n  const name = element.getAttribute('name');\n  const desc = element.getAttribute('desc');\n  const type = element.getAttribute('type');\n  const appID = element.getAttribute('appID');\n  const fixedOffs = element.getAttribute('fixedOffs');\n  const securityEnabled = element.getAttribute('securityEnabled');\n\n  const gSE = getGSE(element);\n\n  const dataSet = element.parentElement?.querySelector(\n    `DataSet[name=\"${element.getAttribute('datSet')}\"]`\n  );\n\n  const menuActions: MenuAction[] = [];\n  menuActions.push({\n    icon: 'delete',\n    label: get('remove'),\n    action: removeGseControl(element),\n  });\n\n  if (dataSet)\n    menuActions.push({\n      icon: 'edit',\n      label: get('scl.DataSet'),\n      action: openDataSetWizard(dataSet),\n    });\n\n  if (gSE)\n    menuActions.push({\n      icon: 'edit',\n      label: get('scl.Communication'),\n      action: openGseWizard(gSE),\n    });\n\n  return [\n    {\n      title: get('wizard.title.edit', { tagName: element.tagName }),\n      element,\n      primary: {\n        icon: 'save',\n        label: get('save'),\n        action: updateGseControlAction(element),\n      },\n      menuActions,\n      content: [\n        ...contentGseControlWizard({\n          name,\n          desc,\n          type,\n          appID,\n          fixedOffs,\n          securityEnabled,\n        }),\n      ],\n    },\n  ];\n}\n\nexport function selectGseControlWizard(element: Element): Wizard {\n  const gseControls = Array.from(element.querySelectorAll('GSEControl')).filter(\n    isPublic\n  );\n\n  const primary = element.querySelector('LN0')\n    ? {\n        icon: 'add',\n        label: get('GOOSE'),\n        action: prepareGseControlCreateWizard(element),\n      }\n    : undefined;\n\n  return [\n    {\n      title: get('wizard.title.select', { tagName: 'GSEcontrol' }),\n      primary,\n      content: [\n        html`<filtered-list\n          @selected=${(e: SingleSelectedEvent) => {\n            const gseControlIndentity = (<ListItem>(<List>e.target).selected)\n              .value;\n            const gseControl = find(element, 'GSEControl', gseControlIndentity);\n            if (gseControl) {\n              e.target!.dispatchEvent(\n                newSubWizardEvent(() => editGseControlWizard(gseControl))\n              );\n            }\n          }}\n          >${gseControls.map(\n            gseControl =>\n              html`<mwc-list-item twoline value=\"${identity(gseControl)}\"\n                ><span>${gseControl.getAttribute('name')}</span\n                ><span slot=\"secondary\"\n                  >${identity(gseControl)}</span\n                ></mwc-list-item\n              >`\n          )}</filtered-list\n        >`,\n      ],\n    },\n  ];\n}\n"]}