{"version":3,"file":"service-clientServer-configurations.js","sourceRoot":"","sources":["../../src/wizards/service-clientServer-configurations.ts"],"names":[],"mappings":"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","sourcesContent":["import { TemplateResult } from 'lit-html';\nimport { get } from 'lit-translate';\nimport { WizardPage } from '@openscd/open-scd/src/foundation.js';\n\nimport {\n  createFormDivider,\n  createFormElementsFromInputs,\n  isEmptyObject,\n} from './services.js';\n\ninterface DynamicAssociations {\n  max: string | null;\n}\n\ninterface DiscoverCapabilities {\n  getDirectory: string | null;\n  getDataObjectDefinition: string | null;\n  dataObjectDirectory: string | null;\n  getDataSetValue: string | null;\n  setDataSetValue: string | null;\n  setDataSetDirectory: string | null;\n  readWrite: string | null;\n}\n\ninterface FunctionalNaming {\n  confLdName: string | null;\n  supportsLdName: string | null;\n}\n\ninterface ClientCapabilities {\n  maxAttributes: string | null;\n  timerActivatedControl: string | null;\n  getCBValues: string | null;\n  GSEDir: string | null;\n}\n\ninterface ValKindManipulationConfig {\n  setToRO: string | null;\n}\n\ninterface SignalReferenceConfig {\n  max: string | null;\n}\n\ninterface ContentOptions {\n  dynamicAssociations: DynamicAssociations;\n  discoverCapabilities: DiscoverCapabilities;\n  functionalNaming: FunctionalNaming;\n  clientCapabilities: ClientCapabilities;\n  valKindManipulationConfig: ValKindManipulationConfig;\n  signalReferenceConfig: SignalReferenceConfig;\n}\n\nexport function createClientServerConfigurationsWizardPage(\n  services: Element\n): WizardPage | null {\n  const content: TemplateResult[] | null =\n    createClientServerConfigurationsWizard(services);\n\n  return content\n    ? {\n        title: get('wizard.title.edit', { tagName: 'Client Server Services' }),\n        content: [...content],\n        element: services,\n      }\n    : null;\n}\n\nfunction createClientServerConfigurationsWizard(\n  parent: Element\n): TemplateResult[] | null {\n  const content: ContentOptions = {\n    dynamicAssociations: {\n      max: parent.querySelector('DynAssociation')?.getAttribute('max') ?? null,\n    },\n    discoverCapabilities: {\n      getDirectory: parent.querySelector('GetDirectory') ? 'true' : null,\n      getDataObjectDefinition: parent.querySelector('GetDataObjectDefinition')\n        ? 'true'\n        : null,\n      dataObjectDirectory: parent.querySelector('DataObjectDirectory')\n        ? 'true'\n        : null,\n      getDataSetValue: parent.querySelector('GetDataSetValue') ? 'true' : null,\n      setDataSetValue: parent.querySelector('SetDataSetValue') ? 'true' : null,\n      setDataSetDirectory: parent.querySelector('DataSetDirectory')\n        ? 'true'\n        : null,\n      readWrite: parent.querySelector('ReadWrite') ? 'true' : null,\n    },\n    functionalNaming: {\n      confLdName: parent.querySelector('ConfLdName') ? 'true' : null,\n      supportsLdName:\n        parent\n          .querySelector('ClientServices')\n          ?.getAttribute('supportsLdName') ?? null,\n    },\n    clientCapabilities: {\n      maxAttributes:\n        parent.querySelector('ClientServices')?.getAttribute('maxAttributes') ??\n        null,\n      timerActivatedControl: parent.querySelector('TimerActivatedControl')\n        ? 'true'\n        : null,\n      getCBValues: parent.querySelector('GetCBValues') ? 'true' : null,\n      GSEDir: parent.querySelector('GSEDir') ? 'true' : null,\n    },\n    valKindManipulationConfig: {\n      setToRO:\n        parent.querySelector('ValueHandling')?.getAttribute('setToRO') ?? null,\n    },\n    signalReferenceConfig: {\n      max: parent.querySelector('ConfSigRef')?.getAttribute('max') ?? null,\n    },\n  };\n\n  return isEmptyObject(content)\n    ? null\n    : [\n        createFormDivider('Dynamic Associations'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'TextField',\n            label: 'max',\n            required: false,\n            helper:\n              'The maximum number of guaranteed parallel association with the IED. If missing, no association is possible',\n            maybeValue: content.dynamicAssociations.max?.toString() ?? null,\n            nullable: true,\n          },\n        ]),\n        createFormDivider('Discover Capabilities'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'Checkbox',\n            label: 'GetDirectory',\n            helper:\n              'Whether IED supports GetServerDirectory, GetLogicalDeviceDirectory, GetLogicalNodeDirectory',\n            maybeValue: content.discoverCapabilities.getDirectory,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'GetDataObjectDefinition',\n            helper: 'Whether IED supports the service GetDataDefinition',\n            maybeValue: content.discoverCapabilities.getDataObjectDefinition,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'DataObjectDirectory',\n            helper: 'Whether IED supports the service GetDataDirectory',\n            maybeValue: content.discoverCapabilities.dataObjectDirectory,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'GetDataSetValue',\n            helper: 'Whether IED supports the service GetDataSetValues',\n            maybeValue: content.discoverCapabilities.getDataSetValue,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'SetDataSetValue',\n            helper: 'Whether IED supports the service SetDataSetValue',\n            maybeValue: content.discoverCapabilities.setDataSetValue,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'SetDataSetDirectory',\n            helper: 'Whether IED supports the service SetDataSetDirectory',\n            maybeValue: content.discoverCapabilities.setDataSetDirectory,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'ReadWrite',\n            helper:\n              'Whether IED supports the service GetData, SetData, and the Operate services',\n            maybeValue: content.discoverCapabilities.readWrite,\n            nullable: true,\n            default: false,\n          },\n        ]),\n        createFormDivider('Functional Naming'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'Checkbox',\n            label: 'ConfLdName',\n            helper:\n              'Whether the IED allows defining the attribute ldName in logical devices (LDevice)',\n            maybeValue: content.functionalNaming.confLdName,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'supportsLdName',\n            helper:\n              'Whether the IED understands the logical device (LDevice) name (ldName) setting as a client',\n            maybeValue: content.functionalNaming.supportsLdName,\n            nullable: true,\n            default: false,\n          },\n        ]),\n        createFormDivider('Client Capabilities'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'TextField',\n            label: 'maxAttributes',\n            required: false,\n            helper:\n              'The maximum receivable data attributes (across all data sets)',\n            maybeValue:\n              content.clientCapabilities.maxAttributes?.toString() ?? null,\n            nullable: true,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'TimerActivatedControl',\n            helper: 'Whether IED supports time activated control',\n            maybeValue: content.clientCapabilities.timerActivatedControl,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'GetCBValues',\n            helper: 'Whether IED can read control blocks online',\n            maybeValue: content.clientCapabilities.getCBValues,\n            nullable: true,\n            default: false,\n          },\n          {\n            kind: 'Checkbox',\n            label: 'GSEDir',\n            helper:\n              'Whether IED supports GSE directory services acc. to IEC 61850-7-2',\n            maybeValue: content.clientCapabilities.GSEDir,\n            nullable: true,\n            default: false,\n          },\n        ]),\n        createFormDivider('ValKind Manipulation Configuration'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'Checkbox',\n            label: 'setToRO',\n            helper:\n              'Whether valKind attribute in DA/BDA element that are Set can be modified to RO (only for function constrains for CF, DC, SP)',\n            maybeValue: content.valKindManipulationConfig.setToRO,\n            nullable: true,\n            default: false,\n          },\n        ]),\n        createFormDivider('Signal Reference Configuration'),\n        ...createFormElementsFromInputs([\n          {\n            kind: 'TextField',\n            label: 'max',\n            required: false,\n            helper:\n              'The maximum object references that the IED can create (instantiation only by IED Configuration Tool)',\n            maybeValue: content.signalReferenceConfig.max?.toString() ?? null,\n            nullable: true,\n          },\n        ]),\n      ];\n}\n"]}