{"version":3,"file":"subnetwork-editor.js","sourceRoot":"","sources":["../../../src/editors/communication/subnetwork-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  TemplateResult,\n  customElement,\n  html,\n  property,\n  css,\n  state,\n  query,\n} from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-dialog';\nimport '@material/mwc-icon-button';\nimport type { Dialog } from '@material/mwc-dialog';\n\nimport './connectedap-editor.js';\nimport './gse-editor.js';\nimport './smv-editor.js';\nimport {\n  newWizardEvent,\n  compareNames,\n} from '@openscd/open-scd/src/foundation.js';\nimport { newActionEvent } from '@openscd/core/foundation/deprecated/editor.js';\nimport { createConnectedApWizard } from '../../wizards/connectedap.js';\nimport { wizards } from '../../wizards/wizard-library.js';\nimport { canMoveCommunicationElementToConnectedAP, getAllConnectedAPsOfSameIED } from './foundation.js';\n\n/** [[`Communication`]] subeditor for a `SubNetwork` element. */\n@customElement('subnetwork-editor')\nexport class SubNetworkEditor extends LitElement {\n  @property({ attribute: false })\n  doc!: XMLDocument;\n\n  @property({ type: Number })\n  editCount = -1;\n\n  /** SCL element SubNetwork */\n  @property({ attribute: false })\n  element!: Element;\n\n  /** SubNetwork attribute name */\n  @property({ type: String })\n  get name(): string {\n    return this.element.getAttribute('name') ?? 'UNDEFINED';\n  }\n\n  /** SubNetwork attribute desc */\n  @property({ type: String })\n  get desc(): string | null {\n    return this.element.getAttribute('desc') ?? null;\n  }\n\n  /** SubNetwork attribute type */\n  @property({ type: String })\n  get type(): string | null {\n    return this.element.getAttribute('type') ?? null;\n  }\n\n  /** SubNetwork child elements BitRate label */\n  @property({ type: String })\n  get bitrate(): string | null {\n    const bitRate = this.element.querySelector('BitRate');\n    if (bitRate === null) return null;\n    const bitRateValue = bitRate.textContent ?? '';\n    const m = bitRate.getAttribute('multiplier');\n    const unit = ` ${m ?? ''}b/s`;\n    return bitRateValue ? bitRateValue + unit : null;\n  }\n\n  @state()\n  private moveTargetElement: Element | null = null;\n\n  @state()\n  newlySelectedAP: Element | null = null;\n\n  @query('#moveDialog') private moveDialog!: Dialog;\n\n  private openConnectedAPwizard(): void {\n    this.dispatchEvent(newWizardEvent(createConnectedApWizard(this.element)));\n  }\n\n  private openEditWizard(): void {\n    const wizard = wizards['SubNetwork'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  remove(): void {\n    if (this.element)\n      this.dispatchEvent(\n        newActionEvent({\n          old: {\n            parent: this.element.parentElement!,\n            element: this.element,\n            reference: this.element.nextSibling,\n          },\n        })\n      );\n  }\n\n  private async openMoveDialog(e: CustomEvent): Promise<void> {\n    this.moveTargetElement = e.detail.element;\n    this.newlySelectedAP = null;\n    await this.updateComplete;\n\n    this.moveDialog.show();\n  }\n\n  private confirmMove(): void {\n    if (this.moveTargetElement && this.newlySelectedAP) {\n      const moveAction = {\n        old: {\n          parent: this.moveTargetElement.parentElement!,\n          element: this.moveTargetElement,\n          reference: null,\n        },\n        new: {\n          parent: this.newlySelectedAP,\n        },\n      };\n\n      this.dispatchEvent(\n        newActionEvent({\n          actions: [moveAction],\n          title: `Move ${this.moveTargetElement.tagName} to another ConnectedAP`,\n        })\n      );\n    }\n    this.moveDialog.close();\n    this.moveTargetElement = null;\n    this.newlySelectedAP = null;\n  }\n\n  private renderSmvEditors(iedName: string): TemplateResult[] {\n    return Array.from(\n      this.element\n        .closest('Communication')\n        ?.querySelectorAll(`ConnectedAP[iedName=\"${iedName}\"] > SMV`) ?? []\n    ).map(\n      smv => html`<smv-editor\n        class=\"${smv.closest('SubNetwork') !== this.element ? 'disabled' : ''}\"\n        .editCount=${this.editCount}\n        .doc=${this.doc}\n        .element=${smv}\n        @request-smv-move=${(e: CustomEvent) => this.openMoveDialog(e)}\n      ></smv-editor>`\n    );\n  }\n\n  private renderGseEditors(iedName: string): TemplateResult[] {\n    return Array.from(\n      this.element\n        .closest('Communication')\n        ?.querySelectorAll(`ConnectedAP[iedName=\"${iedName}\"] > GSE`) ?? []\n    ).map(\n      gse => html`<gse-editor\n        class=\"${gse.closest('SubNetwork') !== this.element ? 'disabled' : ''}\"\n        .editCount=${this.editCount}\n        .doc=${this.doc}\n        .element=${gse}\n        @request-gse-move=${(e: CustomEvent) => this.openMoveDialog(e)}\n      ></gse-editor>`\n    );\n  }\n\n  private renderConnectedApEditors(iedName: string): TemplateResult[] {\n    return Array.from(\n      this.element.parentElement?.querySelectorAll(\n        `:scope > SubNetwork > ConnectedAP[iedName=\"${iedName}\"]`\n      ) ?? []\n    ).map(\n      connectedAP =>\n        html`<connectedap-editor\n          class=\"${connectedAP.parentElement !== this.element\n            ? 'disabled'\n            : ''}\"\n          .element=${connectedAP}\n        ></connectedap-editor>`\n    );\n  }\n\n  private renderIEDs(): TemplateResult[] {\n    return Array.from(this.element.querySelectorAll(':scope > ConnectedAP'))\n      .map(connAP => connAP.getAttribute('iedName')!)\n      .filter((v, i, a) => a.indexOf(v) === i)\n      .sort(compareNames)\n      .map(\n        iedName => html` <action-pane id=\"iedSection\" label=\"${iedName}\">\n          ${this.renderConnectedApEditors(iedName)}${this.renderGseEditors(\n            iedName\n          )}${this.renderSmvEditors(iedName)}\n        </action-pane>`\n      );\n  }\n\n  private renderSmvGseMoveDialog(): TemplateResult {\n    if (!this.moveTargetElement) return html``;\n\n    const allConnectedAPs = getAllConnectedAPsOfSameIED(\n      this.moveTargetElement,\n      this.doc\n    );\n\n    const validTargetConnectedAPs = allConnectedAPs.filter(cap => canMoveCommunicationElementToConnectedAP(\n      this.moveTargetElement!,\n      cap,\n      this.doc\n    ));\n\n    return html`\n      <mwc-dialog\n        id=\"moveDialog\"\n        heading=${get('wizard.title.selectAp')}\n        @closed=${() => {\n          this.moveTargetElement = null;\n          this.newlySelectedAP = null;\n        }}\n      >\n        <mwc-list>\n          ${allConnectedAPs.map(\n            connectedAP => html`\n              <mwc-list-item\n                class=${connectedAP === this.newlySelectedAP ? 'selected' : ''}\n                @click=${() => (this.newlySelectedAP = connectedAP)}\n                ?selected=${connectedAP === this.newlySelectedAP}\n                ?disabled=${!validTargetConnectedAPs.includes(connectedAP)}\n              >\n                ${connectedAP.getAttribute('iedName')} >\n                ${connectedAP.getAttribute('apName')}\n              </mwc-list-item>\n            `\n          )}\n        </mwc-list>\n        <mwc-button\n          slot=\"primaryAction\"\n          icon=\"save\"\n          @click=${() => this.confirmMove()}\n          ?disabled=${!this.newlySelectedAP}\n        >\n          ${get('save')}\n        </mwc-button>\n        <mwc-button\n          slot=\"secondaryAction\"\n          dialogAction=\"close\"\n          style=\"--mdc-theme-primary: var(--mdc-theme-error)\"\n          >${get('close')}</mwc-button\n        >\n      </mwc-dialog>\n    `;\n  }\n\n  private subNetworkSpecs(): string {\n    if (!this.type && !this.bitrate) return '';\n\n    return `(${[this.type, this.bitrate].filter(text => !!text).join(' — ')})`;\n  }\n\n  private header(): string {\n    return `${this.name} ${this.desc === null ? '' : `— ${this.desc}`}\n    ${this.subNetworkSpecs()}`;\n  }\n\n  render(): TemplateResult {\n    return html`<action-pane label=\"${this.header()}\">\n        <abbr slot=\"action\" title=\"${get('edit')}\">\n          <mwc-icon-button\n            icon=\"edit\"\n            @click=${() => this.openEditWizard()}\n          ></mwc-icon-button>\n        </abbr>\n        <abbr slot=\"action\" title=\"${get('remove')}\">\n          <mwc-icon-button\n            icon=\"delete\"\n            @click=${() => this.remove()}\n          ></mwc-icon-button>\n        </abbr>\n        <abbr slot=\"action\" title=\"${get('add')}\">\n          <mwc-icon-button\n            icon=\"playlist_add\"\n            @click=\"${() => this.openConnectedAPwizard()}\"\n          ></mwc-icon-button>\n        </abbr>\n        <div id=\"iedContainer\">${this.renderIEDs()}</div>\n      </action-pane>\n      ${this.renderSmvGseMoveDialog()}`;\n  }\n\n  static styles = css`\n    #iedContainer {\n      display: grid;\n      box-sizing: border-box;\n      gap: 12px;\n      padding: 8px 12px 16px;\n      grid-template-columns: repeat(auto-fit, minmax(150px, auto));\n    }\n\n    #iedSection:not(:focus):not(:focus-within) .disabled {\n      display: none;\n    }\n\n    #iedSection:not(:focus):not(:focus-within) gse-editor {\n      display: none;\n    }\n\n    #iedSection:not(:focus):not(:focus-within) smv-editor {\n      display: none;\n    }\n\n    #iedSection .disabled {\n      pointer-events: none;\n      opacity: 0.5;\n    }\n\n    abbr {\n      text-decoration: none;\n      border-bottom: none;\n    }\n\n    mwc-list-item[disabled] {\n      color: var(--mdc-theme-text-disabled, #9e9e9e); /* Gray text */\n      opacity: 0.6;\n      pointer-events: none;\n    }\n\n    mwc-list-item.selected {\n      background-color: var(--mdc-theme-primary);\n      color: var(--mdc-theme-on-primary, #ffffff);\n      font-weight: bold;\n    }\n  `;\n}\n"]}