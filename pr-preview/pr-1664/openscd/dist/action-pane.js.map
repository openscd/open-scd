{"version":3,"file":"action-pane.js","sourceRoot":"","sources":["../src/action-pane.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,aAAa,EACb,IAAI,EACJ,UAAU,EACV,QAAQ,GAET,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAC;AAEzD,OAAO,oBAAoB,CAAC;AAC5B,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAC;AAEnC,SAAS,SAAS,CAAoB,IAAU,EAAE,QAAgB;IAChE,MAAM,OAAO,GACX,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY;QACjC,CAAC,CAAW,IAAK,CAAC,OAAO,CAAI,QAAQ,CAAC;QACtC,CAAC,CAAC,IAAI,CAAC;IAEX,IAAI,OAAO;QAAE,OAAO,OAAO,CAAC;IAE5B,MAAM,IAAI,GAAgC,IAAI,CAAC,WAAW,EAAE,CAAC;IAE7D,IAAI,IAAI,YAAY,UAAU;QAAE,OAAO,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IAEtE,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;;;;;GAMG;AAEI,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,UAAU;IAAnC;;QAOL,oEAAoE;QAEpE,cAAS,GAAG,KAAK,CAAC;QAClB,yCAAyC;QAEzC,gBAAW,GAAG,KAAK,CAAC;QACpB,iEAAiE;QAEjE,UAAK,GAAG,CAAC,CAAC;IAiIZ,CAAC;IA/HC,KAAK,CAAC,YAAY;QAChB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAElB,MAAM,UAAU,GAAG,SAAS,CAAa,IAAI,CAAC,UAAW,EAAE,aAAa,CAAC,CAAC;QAC1E,IAAI,UAAU;YAAE,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;QAElD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtC,CAAC;IAEO,YAAY;QAClB,MAAM,OAAO,GAAG,IAAI,CAAA;;aAEX,IAAI,CAAC,IAAI;YACV,CAAC,CAAC,IAAI,CAAA,aAAa,IAAI,CAAC,IAAI,aAAa;YACzC,CAAC,CAAC,OAAO;;;QAGb,IAAI,CAAC,KAAK,IAAI,OAAO;6CACgB,CAAC;QAE1C,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;QACzD,2GAA2G;QAC3G,MAAM,KAAK,GAAG,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/D,QAAQ,YAAY,EAAE;YACpB,KAAK,CAAC;gBACJ,OAAO,IAAI,CAAA,cAAc,KAAK,KAAK,OAAO,OAAO,CAAC;YACpD,KAAK,CAAC;gBACJ,OAAO,IAAI,CAAA,cAAc,KAAK,KAAK,OAAO,OAAO,CAAC;YACpD,KAAK,CAAC;gBACJ,OAAO,IAAI,CAAA,cAAc,KAAK,KAAK,OAAO,OAAO,CAAC;YACpD;gBACE,OAAO,IAAI,CAAA,cAAc,KAAK,KAAK,OAAO,OAAO,CAAC;SACrD;IACH,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;eACA,QAAQ,CAAC;YAChB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,UAAU,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC;SACjC,CAAC;;QAEA,IAAI,CAAC,YAAY,EAAE;;eAEZ,CAAC;IACd,CAAC;;AAEM,iBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8ElB,CAAC;AA5IF;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;yCACZ;AAGf;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;wCACb;AAGd;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;6CACV;AAGlB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;+CACR;AAGpB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;yCACjB;AAfC,UAAU;IADtB,aAAa,CAAC,aAAa,CAAC;GAChB,UAAU,CAgJtB;SAhJY,UAAU","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\n\nimport '@material/mwc-icon';\nimport { nothing } from 'lit-html';\n\nfunction closestTo<E extends Element>(node: Node, selector: string): E | null {\n  const closest =\n    node.nodeType === Node.ELEMENT_NODE\n      ? (<Element>node).closest<E>(selector)\n      : null;\n\n  if (closest) return closest;\n\n  const root = <Document | DocumentFragment>node.getRootNode();\n\n  if (root instanceof ShadowRoot) return closestTo(root.host, selector);\n\n  return null;\n}\n\n/**\n * A responsive container rendering actions in a header.\n *\n * The \"action\" slot may contain up to eight icon buttons.\n * The \"icon\" slot, if filled overrides the icon property.\n * The default slot will be rendered into the pane body in a single column.\n */\n@customElement('action-pane')\nexport class ActionPane extends LitElement {\n  /** caption text, displayed in the header */\n  @property({ type: String })\n  label?: string;\n  /** icon name, displayed unless the \"icon\" slot is filled */\n  @property({ type: String })\n  icon?: string;\n  /** color header with secondary theme color while focus is within */\n  @property({ type: Boolean })\n  secondary = false;\n  /** highlight pane with dotted outline */\n  @property({ type: Boolean })\n  highlighted = false;\n  /** nesting level, default (closest pane ancestor's level) + 1 */\n  @property({ type: Number })\n  level = 1;\n\n  async firstUpdated(): Promise<void> {\n    this.tabIndex = 0;\n\n    const parentPane = closestTo<ActionPane>(this.parentNode!, 'action-pane');\n    if (parentPane) this.level = parentPane.level + 1;\n\n    this.level = Math.floor(this.level);\n  }\n\n  private renderHeader(): TemplateResult {\n    const content = html`<span\n        ><slot name=\"icon\"\n          >${this.icon\n            ? html`<mwc-icon>${this.icon}</mwc-icon>`\n            : nothing}</slot\n        ></span\n      >\n      ${this.label ?? nothing}\n      <nav><slot name=\"action\"></slot></nav>`;\n\n    const headingLevel = Math.floor(Math.max(this.level, 1));\n    // Sometimes a TemplateResult is passed in as Label, not a string. So only when it's a string show a title.\n    const title = typeof this.label === 'string' ? this.label : '';\n    switch (headingLevel) {\n      case 1:\n        return html`<h1 title=\"${title}\">${content}</h1>`;\n      case 2:\n        return html`<h2 title=\"${title}\">${content}</h2>`;\n      case 3:\n        return html`<h3 title=\"${title}\">${content}</h3>`;\n      default:\n        return html`<h4 title=\"${title}\">${content}</h4>`;\n    }\n  }\n\n  render(): TemplateResult {\n    return html`<section\n      class=\"${classMap({\n        secondary: this.secondary,\n        highlighted: this.highlighted,\n        contrasted: this.level % 2 === 0,\n      })}\"\n    >\n      ${this.renderHeader()}\n      <div><slot></slot></div>\n    </section>`;\n  }\n\n  static styles = css`\n    :host {\n      outline: none;\n    }\n\n    :host(:focus-within) section {\n      box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),\n        0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2);\n      outline-width: 4px;\n      transition: all 250ms linear;\n    }\n\n    section {\n      background-color: var(--mdc-theme-surface);\n      transition: all 200ms linear;\n      outline-style: solid;\n      margin: 0px;\n      outline-width: 0px;\n      outline-color: var(--mdc-theme-primary);\n    }\n\n    section.secondary {\n      outline-color: var(--mdc-theme-secondary);\n    }\n\n    section > div {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n      padding: 8px 12px 16px;\n      clear: right;\n    }\n\n    .highlighted {\n      outline-style: dotted;\n      outline-width: 2px;\n    }\n\n    :host(:focus-within) .highlighted {\n      outline-style: solid;\n    }\n\n    .contrasted {\n      background-color: var(--mdc-theme-on-primary);\n    }\n\n    h1,\n    h2,\n    h3,\n    h4 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      overflow: clip visible;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      margin: 0px;\n      line-height: 52px;\n      padding-left: 0.3em;\n    }\n\n    nav {\n      float: right;\n    }\n\n    mwc-icon {\n      vertical-align: middle;\n      position: relative;\n      top: -0.1em;\n      --mdc-icon-size: 1em;\n    }\n\n    ::slotted([slot='icon']) {\n      vertical-align: middle;\n      position: relative;\n      top: -0.1em;\n      --mdc-icon-size: 1em;\n    }\n  `;\n}\n"]}