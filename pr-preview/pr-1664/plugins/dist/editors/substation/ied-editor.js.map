{"version":3,"file":"ied-editor.js","sourceRoot":"","sources":["../../../src/editors/substation/ied-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  customElement,\n  html,\n  LitElement,\n  property,\n  query,\n  TemplateResult,\n} from 'lit-element';\n\nimport '@material/mwc-fab';\nimport '@material/mwc-icon';\nimport { Fab } from '@material/mwc-fab';\n\nimport '@openscd/open-scd/src/action-icon.js';\nimport { createClientLnWizard } from '../../wizards/clientln.js';\nimport {\n  gooseIcon,\n  smvIcon,\n  reportIcon,\n} from '@openscd/open-scd/src/icons/icons.js';\nimport { wizards } from '../../wizards/wizard-library.js';\nimport { newWizardEvent } from '@openscd/open-scd/src/foundation.js';\nimport { newActionEvent } from '@openscd/core/foundation/deprecated/editor.js';\nimport { selectGseControlWizard } from '../../wizards/gsecontrol.js';\nimport { selectSampledValueControlWizard } from '../../wizards/sampledvaluecontrol.js';\nimport { selectReportControlWizard } from '../../wizards/reportcontrol.js';\nimport { removeIEDWizard } from '../../wizards/ied.js';\n\n/** [[`SubstationEditor`]] subeditor for a child-less `IED` element. */\n@customElement('ied-editor')\nexport class IedEditor extends LitElement {\n  /** The document being edited as provided to editor by [[`Zeroline`]]. */\n  @property({ attribute: false })\n  doc!: XMLDocument;\n  @property({ type: Number })\n  editCount = -1;\n  /** SCL element IED */\n  @property({ attribute: false })\n  element!: Element;\n  /** IED name attribute */\n  @property({ type: String })\n  get name(): string {\n    return this.element.getAttribute('name') ?? 'UNDEFINED';\n  }\n\n  @query('.connectreport') connectReport!: Fab;\n\n  private openEditWizard(): void {\n    const wizard = wizards['IED'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  private openReportControlSelection(): void {\n    this.dispatchEvent(\n      newWizardEvent(() => selectReportControlWizard(this.element))\n    );\n  }\n\n  private openGseControlSelection(): void {\n    this.dispatchEvent(\n      newWizardEvent(() => selectGseControlWizard(this.element))\n    );\n  }\n\n  private openSmvControlSelection(): void {\n    this.dispatchEvent(\n      newWizardEvent(() => selectSampledValueControlWizard(this.element))\n    );\n  }\n\n  private openCommunicationMapping(): void {\n    const sendingIeds = Array.from(\n      this.element.closest('SCL')?.querySelectorAll('IED') ?? []\n    );\n    const wizard = createClientLnWizard(sendingIeds, this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  private removeIED(): void {\n    const wizard = removeIEDWizard(this.element);\n    if (wizard) {\n      this.dispatchEvent(newWizardEvent(() => wizard));\n    } else {\n      // If no Wizard is needed, just remove the element.\n      this.dispatchEvent(\n        newActionEvent({\n          old: { parent: this.element.parentElement!, element: this.element },\n        })\n      );\n    }\n  }\n\n  render(): TemplateResult {\n    return html`<action-icon label=\"${this.name}\" icon=\"developer_board\">\n      <mwc-fab\n        slot=\"action\"\n        class=\"edit\"\n        mini\n        @click=\"${() => this.openEditWizard()}\"\n        icon=\"edit\"\n      ></mwc-fab\n      ><mwc-fab\n        slot=\"action\"\n        class=\"delete\"\n        mini\n        @click=\"${() => this.removeIED()}\"\n        icon=\"delete\"\n      ></mwc-fab\n      ><mwc-fab\n        slot=\"action\"\n        class=\"selectreport\"\n        mini\n        @click=\"${() => this.openReportControlSelection()}\"\n        ><mwc-icon slot=\"icon\">${reportIcon}</mwc-icon></mwc-fab\n      ><mwc-fab\n        slot=\"action\"\n        class=\"selectsmv\"\n        mini\n        @click=\"${() => this.openSmvControlSelection()}\"\n        ><mwc-icon slot=\"icon\">${smvIcon}</mwc-icon></mwc-fab\n      ><mwc-fab\n        slot=\"action\"\n        class=\"connectreport\"\n        mini\n        @click=\"${() => this.openCommunicationMapping()}\"\n        icon=\"add_link\"\n      ></mwc-fab\n      ><mwc-fab\n        slot=\"action\"\n        class=\"selectgse\"\n        mini\n        @click=\"${() => this.openGseControlSelection()}\"\n        ><mwc-icon slot=\"icon\">${gooseIcon}</mwc-icon></mwc-fab\n      ></action-icon\n    > `;\n  }\n}\n"]}