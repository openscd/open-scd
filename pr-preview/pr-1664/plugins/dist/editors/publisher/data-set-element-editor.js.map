{"version":3,"file":"data-set-element-editor.js","sourceRoot":"","sources":["../../../src/editors/publisher/data-set-element-editor.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,aAAa,EACb,IAAI,EACJ,UAAU,EACV,QAAQ,EACR,KAAK,GAEN,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAEpC,OAAO,kCAAkC,CAAC;AAE1C,OAAO,2CAA2C,CAAC;AACnD,OAAO,wCAAwC,CAAC;AAEhD,OAAO,EAAE,QAAQ,EAAE,MAAM,qCAAqC,CAAC;AAGxD,IAAM,oBAAoB,GAA1B,MAAM,oBAAqB,SAAQ,UAAU;IASlD,IAAY,IAAI;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;IACxE,CAAC;IAED,IAAY,IAAI;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;IACxE,CAAC;IAEO,aAAa;QACnB,OAAO,IAAI,CAAA;;sBAEO,IAAI,CAAC,IAAI;kBACb,GAAG,CAAC,UAAU,CAAC;;;;;;;sBAOX,IAAI,CAAC,IAAI;kBACb,GAAG,CAAC,UAAU,CAAC;;;;;;WAMtB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC/D,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC,GAAG;gBAC5D,QAAQ;gBACR,QAAQ;gBACR,SAAS;gBACT,QAAQ;gBACR,QAAQ;gBACR,QAAQ;gBACR,IAAI;aACL,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC;YAE/D,OAAO,IAAI,CAAA,0CAA0C,QAAQ,CAAC,IAAI,CAAC;;iBAE5D,MAAM,GAAG,MAAM;gBAChB,CAAC,CAAC,GAAG,GAAG,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG;gBACrC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG;;iBAErB,MAAM,GAAG,GAAG,GAAG,MAAM,GAAG,OAAO,GAAG,MAAM;;2BAE9B,CAAC;QACpB,CAAC,CAAC;QACF,CAAC;IACP,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,OAAO;YACd,OAAO,IAAI,CAAA;;;wCAGuB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;;UAEpD,IAAI,CAAC,aAAa,EAAE;aACjB,CAAC;QAEV,OAAO,IAAI,CAAA;;;sCAGuB,GAAG,CAAC,qBAAqB,CAAC;;WAErD,CAAC;IACV,CAAC;;AAEM,2BAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiClB,CAAC;AA3GF;IADC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;iDACb;AAGlB;IADC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;qDACN;AAGzB;IADC,KAAK,EAAE;gDAGP;AAED;IADC,KAAK,EAAE;gDAGP;AAfU,oBAAoB;IADhC,aAAa,CAAC,yBAAyB,CAAC;GAC5B,oBAAoB,CA+GhC;SA/GY,oBAAoB","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  LitElement,\n  property,\n  state,\n  TemplateResult,\n} from 'lit-element';\nimport { get } from 'lit-translate';\n\nimport '@material/mwc-list/mwc-list-item';\n\nimport '@openscd/open-scd/src/wizard-textfield.js';\nimport '@openscd/open-scd/src/filtered-list.js';\n\nimport { identity } from '@openscd/open-scd/src/foundation.js';\n\n@customElement('data-set-element-editor')\nexport class DataSetElementEditor extends LitElement {\n  /** The document being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property({ attribute: false })\n  doc!: XMLDocument;\n  /** The element being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property({ attribute: false })\n  element!: Element | null;\n\n  @state()\n  private get name(): string | null {\n    return this.element ? this.element.getAttribute('name') : 'UNDEFINED';\n  }\n  @state()\n  private get desc(): string | null {\n    return this.element ? this.element.getAttribute('desc') : 'UNDEFINED';\n  }\n\n  private renderContent(): TemplateResult {\n    return html`<wizard-textfield\n        label=\"name\"\n        .maybeValue=${this.name}\n        helper=\"${get('scl.name')}\"\n        required\n        disabled\n      >\n      </wizard-textfield>\n      <wizard-textfield\n        label=\"desc\"\n        .maybeValue=${this.desc}\n        helper=\"${get('scl.desc')}\"\n        nullable\n        disabled\n      >\n      </wizard-textfield>\n      <filtered-list\n        >${Array.from(this.element!.querySelectorAll('FCDA')).map(fcda => {\n          const [ldInst, prefix, lnClass, lnInst, doName, daName, fc] = [\n            'ldInst',\n            'prefix',\n            'lnClass',\n            'lnInst',\n            'doName',\n            'daName',\n            'fc',\n          ].map(attributeName => fcda.getAttribute(attributeName) ?? '');\n\n          return html`<mwc-list-item selected twoline value=\"${identity(fcda)}\"\n            ><span\n              >${doName}${daName\n                ? '.' + daName + ' ' + '[' + fc + ']'\n                : ' ' + '[' + fc + ']'}</span\n            ><span slot=\"secondary\"\n              >${ldInst + '/' + prefix + lnClass + lnInst}</span\n            >\n          </mwc-list-item>`;\n        })}</filtered-list\n      >`;\n  }\n\n  render(): TemplateResult {\n    if (this.element)\n      return html`<div class=\"content\">\n        <h2>\n          <div>DataSet</div>\n          <div class=\"headersubtitle\">${identity(this.element)}</div>\n        </h2>\n        ${this.renderContent()}\n      </div>`;\n\n    return html`<div class=\"content\">\n      <h2>\n        <div>DataSet</div>\n        <div class=\"headersubtitle\">${get('publisher.nodataset')}</div>\n      </h2>\n    </div>`;\n  }\n\n  static styles = css`\n    .content {\n      display: flex;\n      flex-direction: column;\n      background-color: var(--mdc-theme-surface);\n    }\n\n    .content > * {\n      display: block;\n      margin: 4px 8px 16px;\n    }\n\n    h2 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n\n      margin: 0px;\n      padding-left: 0.3em;\n      transition: background-color 150ms linear;\n    }\n\n    .headersubtitle {\n      font-size: 16px;\n      font-weight: 200;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n\n    *[iconTrailing='search'] {\n      --mdc-shape-small: 28px;\n    }\n  `;\n}\n"]}